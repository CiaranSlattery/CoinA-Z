{"ast":null,"code":"/**\r\n * DevExtreme (esm/events/gesture/emitter.gesture.js)\r\n * Version: 21.2.5\r\n * Build date: Mon Jan 17 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport devices from \"../../core/devices\";\nimport { styleProp } from \"../../core/utils/style\";\nimport callOnce from \"../../core/utils/call_once\";\nimport { resetActiveElement, clearSelection } from \"../../core/utils/dom\";\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\nvar ready = readyCallbacks.add;\nimport { sign } from \"../../core/utils/math\";\nimport { noop } from \"../../core/utils/common\";\nimport { isDefined } from \"../../core/utils/type\";\nimport { needSkipEvent, createEvent, eventData, isDxMouseWheelEvent, eventDelta, isTouchEvent } from \"../utils/index\";\nimport Emitter from \"../core/emitter\";\nvar abs = Math.abs;\nvar SLEEP = 0;\nvar INITED = 1;\nvar STARTED = 2;\nvar TOUCH_BOUNDARY = 10;\nvar IMMEDIATE_TOUCH_BOUNDARY = 0;\nvar IMMEDIATE_TIMEOUT = 180;\n\nvar supportPointerEvents = function () {\n  return styleProp(\"pointer-events\");\n};\n\nvar setGestureCover = callOnce(function () {\n  var isDesktop = \"desktop\" === devices.real().deviceType;\n\n  if (!supportPointerEvents() || !isDesktop) {\n    return noop;\n  }\n\n  var $cover = $(\"<div>\").addClass(\"dx-gesture-cover\").css(\"pointerEvents\", \"none\");\n  eventsEngine.subscribeGlobal($cover, \"dxmousewheel\", function (e) {\n    e.preventDefault();\n  });\n  ready(function () {\n    $cover.appendTo(\"body\");\n  });\n  return function (toggle, cursor) {\n    $cover.css(\"pointerEvents\", toggle ? \"all\" : \"none\");\n    toggle && $cover.css(\"cursor\", cursor);\n  };\n});\n\nvar gestureCover = function (toggle, cursor) {\n  var gestureCoverStrategy = setGestureCover();\n  gestureCoverStrategy(toggle, cursor);\n};\n\nvar GestureEmitter = Emitter.inherit({\n  gesture: true,\n  configure: function (data) {\n    this.getElement().css(\"msTouchAction\", data.immediate ? \"pinch-zoom\" : \"\");\n    this.callBase(data);\n  },\n  allowInterruptionByMouseWheel: function () {\n    return this._stage !== STARTED;\n  },\n  getDirection: function () {\n    return this.direction;\n  },\n  _cancel: function () {\n    this.callBase.apply(this, arguments);\n\n    this._toggleGestureCover(false);\n\n    this._stage = SLEEP;\n  },\n  start: function (e) {\n    if (e._needSkipEvent || needSkipEvent(e)) {\n      this._cancel(e);\n\n      return;\n    }\n\n    this._startEvent = createEvent(e);\n    this._startEventData = eventData(e);\n    this._stage = INITED;\n\n    this._init(e);\n\n    this._setupImmediateTimer();\n  },\n  _setupImmediateTimer: function () {\n    clearTimeout(this._immediateTimer);\n    this._immediateAccepted = false;\n\n    if (!this.immediate) {\n      return;\n    }\n\n    this._immediateTimer = setTimeout(function () {\n      this._immediateAccepted = true;\n    }.bind(this), IMMEDIATE_TIMEOUT);\n  },\n  move: function (e) {\n    if (this._stage === INITED && this._directionConfirmed(e)) {\n      this._stage = STARTED;\n\n      this._resetActiveElement();\n\n      this._toggleGestureCover(true);\n\n      this._clearSelection(e);\n\n      this._adjustStartEvent(e);\n\n      this._start(this._startEvent);\n\n      if (this._stage === SLEEP) {\n        return;\n      }\n\n      this._requestAccept(e);\n\n      this._move(e);\n\n      this._forgetAccept();\n    } else if (this._stage === STARTED) {\n      this._clearSelection(e);\n\n      this._move(e);\n    }\n  },\n  _directionConfirmed: function (e) {\n    var touchBoundary = this._getTouchBoundary(e);\n\n    var delta = eventDelta(this._startEventData, eventData(e));\n    var deltaX = abs(delta.x);\n    var deltaY = abs(delta.y);\n\n    var horizontalMove = this._validateMove(touchBoundary, deltaX, deltaY);\n\n    var verticalMove = this._validateMove(touchBoundary, deltaY, deltaX);\n\n    var direction = this.getDirection(e);\n    var bothAccepted = \"both\" === direction && (horizontalMove || verticalMove);\n    var horizontalAccepted = \"horizontal\" === direction && horizontalMove;\n    var verticalAccepted = \"vertical\" === direction && verticalMove;\n    return bothAccepted || horizontalAccepted || verticalAccepted || this._immediateAccepted;\n  },\n  _validateMove: function (touchBoundary, mainAxis, crossAxis) {\n    return mainAxis && mainAxis >= touchBoundary && (this.immediate ? mainAxis >= crossAxis : true);\n  },\n  _getTouchBoundary: function (e) {\n    return this.immediate || isDxMouseWheelEvent(e) ? IMMEDIATE_TOUCH_BOUNDARY : TOUCH_BOUNDARY;\n  },\n  _adjustStartEvent: function (e) {\n    var touchBoundary = this._getTouchBoundary(e);\n\n    var delta = eventDelta(this._startEventData, eventData(e));\n    this._startEvent.pageX += sign(delta.x) * touchBoundary;\n    this._startEvent.pageY += sign(delta.y) * touchBoundary;\n  },\n  _resetActiveElement: function () {\n    if (\"ios\" === devices.real().platform && this.getElement().find(\":focus\").length) {\n      resetActiveElement();\n    }\n  },\n  _toggleGestureCover: function (toggle) {\n    this._toggleGestureCoverImpl(toggle);\n  },\n  _toggleGestureCoverImpl: function (toggle) {\n    var isStarted = this._stage === STARTED;\n\n    if (isStarted) {\n      gestureCover(toggle, this.getElement().css(\"cursor\"));\n    }\n  },\n  _clearSelection: function (e) {\n    if (isDxMouseWheelEvent(e) || isTouchEvent(e)) {\n      return;\n    }\n\n    clearSelection();\n  },\n  end: function (e) {\n    this._toggleGestureCover(false);\n\n    if (this._stage === STARTED) {\n      this._end(e);\n    } else if (this._stage === INITED) {\n      this._stop(e);\n    }\n\n    this._stage = SLEEP;\n  },\n  dispose: function () {\n    clearTimeout(this._immediateTimer);\n    this.callBase.apply(this, arguments);\n\n    this._toggleGestureCover(false);\n  },\n  _init: noop,\n  _start: noop,\n  _move: noop,\n  _stop: noop,\n  _end: noop\n});\nGestureEmitter.initialTouchBoundary = TOUCH_BOUNDARY;\n\nGestureEmitter.touchBoundary = function (newBoundary) {\n  if (isDefined(newBoundary)) {\n    TOUCH_BOUNDARY = newBoundary;\n    return;\n  }\n\n  return TOUCH_BOUNDARY;\n};\n\nexport default GestureEmitter;","map":{"version":3,"sources":["C:/Users/ciara/OneDrive - GMIT/Coin A-Z Test Repo/frontend/node_modules/devextreme/esm/events/gesture/emitter.gesture.js"],"names":["$","eventsEngine","devices","styleProp","callOnce","resetActiveElement","clearSelection","readyCallbacks","ready","add","sign","noop","isDefined","needSkipEvent","createEvent","eventData","isDxMouseWheelEvent","eventDelta","isTouchEvent","Emitter","abs","Math","SLEEP","INITED","STARTED","TOUCH_BOUNDARY","IMMEDIATE_TOUCH_BOUNDARY","IMMEDIATE_TIMEOUT","supportPointerEvents","setGestureCover","isDesktop","real","deviceType","$cover","addClass","css","subscribeGlobal","e","preventDefault","appendTo","toggle","cursor","gestureCover","gestureCoverStrategy","GestureEmitter","inherit","gesture","configure","data","getElement","immediate","callBase","allowInterruptionByMouseWheel","_stage","getDirection","direction","_cancel","apply","arguments","_toggleGestureCover","start","_needSkipEvent","_startEvent","_startEventData","_init","_setupImmediateTimer","clearTimeout","_immediateTimer","_immediateAccepted","setTimeout","bind","move","_directionConfirmed","_resetActiveElement","_clearSelection","_adjustStartEvent","_start","_requestAccept","_move","_forgetAccept","touchBoundary","_getTouchBoundary","delta","deltaX","x","deltaY","y","horizontalMove","_validateMove","verticalMove","bothAccepted","horizontalAccepted","verticalAccepted","mainAxis","crossAxis","pageX","pageY","platform","find","length","_toggleGestureCoverImpl","isStarted","end","_end","_stop","dispose","initialTouchBoundary","newBoundary"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/events/gesture/emitter.gesture.js)\r\n * Version: 21.2.5\r\n * Build date: Mon Jan 17 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport devices from \"../../core/devices\";\r\nimport {\r\n    styleProp\r\n} from \"../../core/utils/style\";\r\nimport callOnce from \"../../core/utils/call_once\";\r\nimport {\r\n    resetActiveElement,\r\n    clearSelection\r\n} from \"../../core/utils/dom\";\r\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\r\nvar ready = readyCallbacks.add;\r\nimport {\r\n    sign\r\n} from \"../../core/utils/math\";\r\nimport {\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    needSkipEvent,\r\n    createEvent,\r\n    eventData,\r\n    isDxMouseWheelEvent,\r\n    eventDelta,\r\n    isTouchEvent\r\n} from \"../utils/index\";\r\nimport Emitter from \"../core/emitter\";\r\nvar abs = Math.abs;\r\nvar SLEEP = 0;\r\nvar INITED = 1;\r\nvar STARTED = 2;\r\nvar TOUCH_BOUNDARY = 10;\r\nvar IMMEDIATE_TOUCH_BOUNDARY = 0;\r\nvar IMMEDIATE_TIMEOUT = 180;\r\nvar supportPointerEvents = function() {\r\n    return styleProp(\"pointer-events\")\r\n};\r\nvar setGestureCover = callOnce((function() {\r\n    var isDesktop = \"desktop\" === devices.real().deviceType;\r\n    if (!supportPointerEvents() || !isDesktop) {\r\n        return noop\r\n    }\r\n    var $cover = $(\"<div>\").addClass(\"dx-gesture-cover\").css(\"pointerEvents\", \"none\");\r\n    eventsEngine.subscribeGlobal($cover, \"dxmousewheel\", (function(e) {\r\n        e.preventDefault()\r\n    }));\r\n    ready((function() {\r\n        $cover.appendTo(\"body\")\r\n    }));\r\n    return function(toggle, cursor) {\r\n        $cover.css(\"pointerEvents\", toggle ? \"all\" : \"none\");\r\n        toggle && $cover.css(\"cursor\", cursor)\r\n    }\r\n}));\r\nvar gestureCover = function(toggle, cursor) {\r\n    var gestureCoverStrategy = setGestureCover();\r\n    gestureCoverStrategy(toggle, cursor)\r\n};\r\nvar GestureEmitter = Emitter.inherit({\r\n    gesture: true,\r\n    configure: function(data) {\r\n        this.getElement().css(\"msTouchAction\", data.immediate ? \"pinch-zoom\" : \"\");\r\n        this.callBase(data)\r\n    },\r\n    allowInterruptionByMouseWheel: function() {\r\n        return this._stage !== STARTED\r\n    },\r\n    getDirection: function() {\r\n        return this.direction\r\n    },\r\n    _cancel: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._toggleGestureCover(false);\r\n        this._stage = SLEEP\r\n    },\r\n    start: function(e) {\r\n        if (e._needSkipEvent || needSkipEvent(e)) {\r\n            this._cancel(e);\r\n            return\r\n        }\r\n        this._startEvent = createEvent(e);\r\n        this._startEventData = eventData(e);\r\n        this._stage = INITED;\r\n        this._init(e);\r\n        this._setupImmediateTimer()\r\n    },\r\n    _setupImmediateTimer: function() {\r\n        clearTimeout(this._immediateTimer);\r\n        this._immediateAccepted = false;\r\n        if (!this.immediate) {\r\n            return\r\n        }\r\n        this._immediateTimer = setTimeout(function() {\r\n            this._immediateAccepted = true\r\n        }.bind(this), IMMEDIATE_TIMEOUT)\r\n    },\r\n    move: function(e) {\r\n        if (this._stage === INITED && this._directionConfirmed(e)) {\r\n            this._stage = STARTED;\r\n            this._resetActiveElement();\r\n            this._toggleGestureCover(true);\r\n            this._clearSelection(e);\r\n            this._adjustStartEvent(e);\r\n            this._start(this._startEvent);\r\n            if (this._stage === SLEEP) {\r\n                return\r\n            }\r\n            this._requestAccept(e);\r\n            this._move(e);\r\n            this._forgetAccept()\r\n        } else if (this._stage === STARTED) {\r\n            this._clearSelection(e);\r\n            this._move(e)\r\n        }\r\n    },\r\n    _directionConfirmed: function(e) {\r\n        var touchBoundary = this._getTouchBoundary(e);\r\n        var delta = eventDelta(this._startEventData, eventData(e));\r\n        var deltaX = abs(delta.x);\r\n        var deltaY = abs(delta.y);\r\n        var horizontalMove = this._validateMove(touchBoundary, deltaX, deltaY);\r\n        var verticalMove = this._validateMove(touchBoundary, deltaY, deltaX);\r\n        var direction = this.getDirection(e);\r\n        var bothAccepted = \"both\" === direction && (horizontalMove || verticalMove);\r\n        var horizontalAccepted = \"horizontal\" === direction && horizontalMove;\r\n        var verticalAccepted = \"vertical\" === direction && verticalMove;\r\n        return bothAccepted || horizontalAccepted || verticalAccepted || this._immediateAccepted\r\n    },\r\n    _validateMove: function(touchBoundary, mainAxis, crossAxis) {\r\n        return mainAxis && mainAxis >= touchBoundary && (this.immediate ? mainAxis >= crossAxis : true)\r\n    },\r\n    _getTouchBoundary: function(e) {\r\n        return this.immediate || isDxMouseWheelEvent(e) ? IMMEDIATE_TOUCH_BOUNDARY : TOUCH_BOUNDARY\r\n    },\r\n    _adjustStartEvent: function(e) {\r\n        var touchBoundary = this._getTouchBoundary(e);\r\n        var delta = eventDelta(this._startEventData, eventData(e));\r\n        this._startEvent.pageX += sign(delta.x) * touchBoundary;\r\n        this._startEvent.pageY += sign(delta.y) * touchBoundary\r\n    },\r\n    _resetActiveElement: function() {\r\n        if (\"ios\" === devices.real().platform && this.getElement().find(\":focus\").length) {\r\n            resetActiveElement()\r\n        }\r\n    },\r\n    _toggleGestureCover: function(toggle) {\r\n        this._toggleGestureCoverImpl(toggle)\r\n    },\r\n    _toggleGestureCoverImpl: function(toggle) {\r\n        var isStarted = this._stage === STARTED;\r\n        if (isStarted) {\r\n            gestureCover(toggle, this.getElement().css(\"cursor\"))\r\n        }\r\n    },\r\n    _clearSelection: function(e) {\r\n        if (isDxMouseWheelEvent(e) || isTouchEvent(e)) {\r\n            return\r\n        }\r\n        clearSelection()\r\n    },\r\n    end: function(e) {\r\n        this._toggleGestureCover(false);\r\n        if (this._stage === STARTED) {\r\n            this._end(e)\r\n        } else if (this._stage === INITED) {\r\n            this._stop(e)\r\n        }\r\n        this._stage = SLEEP\r\n    },\r\n    dispose: function() {\r\n        clearTimeout(this._immediateTimer);\r\n        this.callBase.apply(this, arguments);\r\n        this._toggleGestureCover(false)\r\n    },\r\n    _init: noop,\r\n    _start: noop,\r\n    _move: noop,\r\n    _stop: noop,\r\n    _end: noop\r\n});\r\nGestureEmitter.initialTouchBoundary = TOUCH_BOUNDARY;\r\nGestureEmitter.touchBoundary = function(newBoundary) {\r\n    if (isDefined(newBoundary)) {\r\n        TOUCH_BOUNDARY = newBoundary;\r\n        return\r\n    }\r\n    return TOUCH_BOUNDARY\r\n};\r\nexport default GestureEmitter;\r\n"]},"metadata":{},"sourceType":"module"}