{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/text_box/ui.text_editor.base.js)\r\n * Version: 21.2.5\r\n * Build date: Mon Jan 17 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { focused } from \"../widget/selectors\";\nimport { isDefined } from \"../../core/utils/type\";\nimport { extend } from \"../../core/utils/extend\";\nimport { inArray } from \"../../core/utils/array\";\nimport { each } from \"../../core/utils/iterator\";\nimport { current, isMaterial } from \"../themes\";\nimport devices from \"../../core/devices\";\nimport Editor from \"../editor/editor\";\nimport { addNamespace, normalizeKeyName } from \"../../events/utils/index\";\nimport pointerEvents from \"../../events/pointer\";\nimport ClearButton from \"./ui.text_editor.clear\";\nimport TextEditorButtonCollection from \"./texteditor_button_collection/index\";\nimport config from \"../../core/config\";\nimport errors from \"../widget/ui.errors\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport LoadIndicator from \"../load_indicator\";\nimport { TextEditorLabel } from \"./ui.text_editor.label\";\nimport { getWidth } from \"../../core/utils/size\";\nimport resizeObserverSingleton from \"../../core/resize_observer\";\nvar TEXTEDITOR_CLASS = \"dx-texteditor\";\nvar TEXTEDITOR_INPUT_CONTAINER_CLASS = \"dx-texteditor-input-container\";\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\nvar TEXTEDITOR_INPUT_SELECTOR = \".\" + TEXTEDITOR_INPUT_CLASS;\nvar TEXTEDITOR_CONTAINER_CLASS = \"dx-texteditor-container\";\nvar TEXTEDITOR_BUTTONS_CONTAINER_CLASS = \"dx-texteditor-buttons-container\";\nvar TEXTEDITOR_PLACEHOLDER_CLASS = \"dx-placeholder\";\nvar TEXTEDITOR_EMPTY_INPUT_CLASS = \"dx-texteditor-empty\";\nvar STATE_INVISIBLE_CLASS = \"dx-state-invisible\";\nvar TEXTEDITOR_PENDING_INDICATOR_CLASS = \"dx-pending-indicator\";\nvar TEXTEDITOR_VALIDATION_PENDING_CLASS = \"dx-validation-pending\";\nvar TEXTEDITOR_VALID_CLASS = \"dx-valid\";\nvar EVENTS_LIST = [\"KeyDown\", \"KeyPress\", \"KeyUp\", \"Change\", \"Cut\", \"Copy\", \"Paste\", \"Input\"];\nvar CONTROL_KEYS = [\"tab\", \"enter\", \"shift\", \"control\", \"alt\", \"escape\", \"pageUp\", \"pageDown\", \"end\", \"home\", \"leftArrow\", \"upArrow\", \"rightArrow\", \"downArrow\"];\nvar TextEditorLabelCreator = TextEditorLabel;\n\nfunction checkButtonsOptionType(buttons) {\n  if (isDefined(buttons) && !Array.isArray(buttons)) {\n    throw errors.Error(\"E1053\");\n  }\n}\n\nvar TextEditorBase = Editor.inherit({\n  ctor: function (_, options) {\n    if (options) {\n      checkButtonsOptionType(options.buttons);\n    }\n\n    this._buttonCollection = new TextEditorButtonCollection(this, this._getDefaultButtons());\n    this._$beforeButtonsContainer = null;\n    this._$afterButtonsContainer = null;\n    this._labelContainerElement = null;\n    this.callBase.apply(this, arguments);\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      buttons: void 0,\n      value: \"\",\n      spellcheck: false,\n      showClearButton: false,\n      valueChangeEvent: \"change\",\n      placeholder: \"\",\n      inputAttr: {},\n      onFocusIn: null,\n      onFocusOut: null,\n      onKeyDown: null,\n      onKeyUp: null,\n      onChange: null,\n      onInput: null,\n      onCut: null,\n      onCopy: null,\n      onPaste: null,\n      onEnterKey: null,\n      mode: \"text\",\n      hoverStateEnabled: true,\n      focusStateEnabled: true,\n      text: void 0,\n      displayValueFormatter: function (value) {\n        return isDefined(value) && false !== value ? value : \"\";\n      },\n      stylingMode: config().editorStylingMode || \"outlined\",\n      showValidationMark: true,\n      label: \"\",\n      labelMode: \"static\",\n      labelMark: \"\"\n    });\n  },\n  _defaultOptionsRules: function () {\n    var themeName = current();\n    return this.callBase().concat([{\n      device: function () {\n        return isMaterial(themeName);\n      },\n      options: {\n        stylingMode: config().editorStylingMode || \"filled\",\n        labelMode: \"floating\"\n      }\n    }]);\n  },\n  _getDefaultButtons: function () {\n    return [{\n      name: \"clear\",\n      Ctor: ClearButton\n    }];\n  },\n  _isClearButtonVisible: function () {\n    return this.option(\"showClearButton\") && !this.option(\"readOnly\");\n  },\n  _input: function () {\n    return this.$element().find(TEXTEDITOR_INPUT_SELECTOR).first();\n  },\n  _isFocused: function () {\n    return focused(this._input()) || this.callBase();\n  },\n  _inputWrapper: function () {\n    return this.$element();\n  },\n  _buttonsContainer: function () {\n    return this._inputWrapper().find(\".\" + TEXTEDITOR_BUTTONS_CONTAINER_CLASS).eq(0);\n  },\n  _isControlKey: function (key) {\n    return -1 !== CONTROL_KEYS.indexOf(key);\n  },\n  _renderStylingMode: function () {\n    this.callBase();\n\n    this._updateButtonsStyling(this.option(\"stylingMode\"));\n  },\n  _initMarkup: function () {\n    this.$element().addClass(TEXTEDITOR_CLASS);\n\n    this._renderInput();\n\n    this._renderStylingMode();\n\n    this._renderInputType();\n\n    this._renderPlaceholder();\n\n    this._renderProps();\n\n    this.callBase();\n\n    this._renderValue();\n\n    this._renderLabel();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._refreshValueChangeEvent();\n\n    this._renderEvents();\n\n    this._renderEnterKeyAction();\n\n    this._renderEmptinessEvent();\n  },\n  _renderInput: function () {\n    this._$buttonsContainer = this._$textEditorContainer = $(\"<div>\").addClass(TEXTEDITOR_CONTAINER_CLASS).appendTo(this.$element());\n    this._$textEditorInputContainer = $(\"<div>\").addClass(TEXTEDITOR_INPUT_CONTAINER_CLASS).appendTo(this._$textEditorContainer);\n\n    this._$textEditorInputContainer.append(this._createInput());\n\n    this._renderButtonContainers();\n  },\n\n  _getInputContainer() {\n    return this._$textEditorInputContainer;\n  },\n\n  _renderPendingIndicator: function () {\n    this.$element().addClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\n\n    var $inputContainer = this._getInputContainer();\n\n    var $indicatorElement = $(\"<div>\").addClass(TEXTEDITOR_PENDING_INDICATOR_CLASS).appendTo($inputContainer);\n    this._pendingIndicator = this._createComponent($indicatorElement, LoadIndicator);\n  },\n  _disposePendingIndicator: function () {\n    if (!this._pendingIndicator) {\n      return;\n    }\n\n    this._pendingIndicator.dispose();\n\n    this._pendingIndicator.$element().remove();\n\n    this._pendingIndicator = null;\n    this.$element().removeClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\n  },\n  _renderValidationState: function () {\n    this.callBase();\n    var isPending = \"pending\" === this.option(\"validationStatus\");\n    var $element = this.$element();\n\n    if (isPending) {\n      !this._pendingIndicator && this._renderPendingIndicator();\n      this._showValidMark = false;\n    } else {\n      if (\"invalid\" === this.option(\"validationStatus\")) {\n        this._showValidMark = false;\n      }\n\n      if (!this._showValidMark && true === this.option(\"showValidationMark\")) {\n        this._showValidMark = \"valid\" === this.option(\"validationStatus\") && !!this._pendingIndicator;\n      }\n\n      this._disposePendingIndicator();\n    }\n\n    $element.toggleClass(TEXTEDITOR_VALID_CLASS, !!this._showValidMark);\n  },\n  _renderButtonContainers: function () {\n    var buttons = this.option(\"buttons\");\n    this._$beforeButtonsContainer = this._buttonCollection.renderBeforeButtons(buttons, this._$buttonsContainer);\n    this._$afterButtonsContainer = this._buttonCollection.renderAfterButtons(buttons, this._$buttonsContainer);\n  },\n  _cleanButtonContainers: function () {\n    var _this$_$beforeButtons, _this$_$afterButtonsC;\n\n    null === (_this$_$beforeButtons = this._$beforeButtonsContainer) || void 0 === _this$_$beforeButtons ? void 0 : _this$_$beforeButtons.remove();\n    null === (_this$_$afterButtonsC = this._$afterButtonsContainer) || void 0 === _this$_$afterButtonsC ? void 0 : _this$_$afterButtonsC.remove();\n\n    this._buttonCollection.clean();\n  },\n\n  _clean() {\n    this._buttonCollection.clean();\n\n    this._disposePendingIndicator();\n\n    this._cleanLabelObservable();\n\n    this._$beforeButtonsContainer = null;\n    this._$afterButtonsContainer = null;\n    this._$textEditorContainer = null;\n    this._$buttonsContainer = null;\n    this.callBase();\n  },\n\n  _createInput: function () {\n    var $input = $(\"<input>\");\n\n    this._applyInputAttributes($input, this.option(\"inputAttr\"));\n\n    return $input;\n  },\n  _setSubmitElementName: function (name) {\n    var inputAttrName = this.option(\"inputAttr.name\");\n    return this.callBase(name || inputAttrName || \"\");\n  },\n  _applyInputAttributes: function ($input, customAttributes) {\n    var inputAttributes = extend(this._getDefaultAttributes(), customAttributes);\n    $input.attr(inputAttributes).addClass(TEXTEDITOR_INPUT_CLASS).css(\"minHeight\", this.option(\"height\") ? \"0\" : \"\");\n  },\n  _getDefaultAttributes: function () {\n    var defaultAttributes = {\n      autocomplete: \"off\"\n    };\n    var {\n      ios: ios,\n      mac: mac\n    } = devices.real();\n\n    if (ios || mac) {\n      defaultAttributes.placeholder = \" \";\n    }\n\n    return defaultAttributes;\n  },\n  _updateButtons: function (names) {\n    this._buttonCollection.updateButtons(names);\n  },\n  _updateButtonsStyling: function (editorStylingMode) {\n    each(this.option(\"buttons\"), (_, _ref) => {\n      var {\n        options: options,\n        name: buttonName\n      } = _ref;\n\n      if (options && !options.stylingMode && this.option(\"visible\")) {\n        var buttonInstance = this.getButton(buttonName);\n        buttonInstance.option && buttonInstance.option(\"stylingMode\", \"underlined\" === editorStylingMode ? \"text\" : \"contained\");\n      }\n    });\n  },\n  _renderValue: function () {\n    var renderInputPromise = this._renderInputValue();\n\n    return renderInputPromise.promise();\n  },\n  _renderInputValue: function (value) {\n    var _value;\n\n    value = null !== (_value = value) && void 0 !== _value ? _value : this.option(\"value\");\n    var text = this.option(\"text\");\n    var displayValue = this.option(\"displayValue\");\n    var displayValueFormatter = this.option(\"displayValueFormatter\");\n\n    if (void 0 !== displayValue && null !== value) {\n      text = displayValueFormatter(displayValue);\n    } else if (!isDefined(text)) {\n      text = displayValueFormatter(value);\n    }\n\n    this.option(\"text\", text);\n\n    if (this._input().val() !== (isDefined(text) ? text : \"\")) {\n      this._renderDisplayText(text);\n    } else {\n      this._toggleEmptinessEventHandler();\n    }\n\n    return new Deferred().resolve();\n  },\n  _renderDisplayText: function (text) {\n    this._input().val(text);\n\n    this._toggleEmptinessEventHandler();\n  },\n  _isValueValid: function () {\n    if (this._input().length) {\n      var validity = this._input().get(0).validity;\n\n      if (validity) {\n        return validity.valid;\n      }\n    }\n\n    return true;\n  },\n  _toggleEmptiness: function (isEmpty) {\n    this.$element().toggleClass(TEXTEDITOR_EMPTY_INPUT_CLASS, isEmpty);\n\n    this._togglePlaceholder(isEmpty);\n  },\n  _togglePlaceholder: function (isEmpty) {\n    this.$element().find(\".\".concat(TEXTEDITOR_PLACEHOLDER_CLASS)).eq(0).toggleClass(STATE_INVISIBLE_CLASS, !isEmpty);\n  },\n  _renderProps: function () {\n    this._toggleReadOnlyState();\n\n    this._toggleSpellcheckState();\n\n    this._toggleTabIndex();\n  },\n  _toggleDisabledState: function (value) {\n    this.callBase.apply(this, arguments);\n\n    var $input = this._input();\n\n    $input.prop(\"disabled\", value);\n  },\n  _toggleTabIndex: function () {\n    var $input = this._input();\n\n    var disabled = this.option(\"disabled\");\n    var focusStateEnabled = this.option(\"focusStateEnabled\");\n\n    if (disabled || !focusStateEnabled) {\n      $input.attr(\"tabIndex\", -1);\n    } else {\n      $input.removeAttr(\"tabIndex\");\n    }\n  },\n  _toggleReadOnlyState: function () {\n    this._input().prop(\"readOnly\", this._readOnlyPropValue());\n\n    this.callBase();\n  },\n  _readOnlyPropValue: function () {\n    return this.option(\"readOnly\");\n  },\n  _toggleSpellcheckState: function () {\n    this._input().prop(\"spellcheck\", this.option(\"spellcheck\"));\n  },\n  _cleanLabelObservable: function () {\n    if (this._labelContainerElement) {\n      resizeObserverSingleton.unobserve(this._labelContainerElement);\n      this._labelContainerElement = null;\n    }\n  },\n  _getLabelContainer: function () {\n    return this._input();\n  },\n  _getLabelContainerWidth: function () {\n    return getWidth(this._getLabelContainer());\n  },\n  _getLabelBeforeWidth: function () {\n    var buttonsBeforeWidth = this._$beforeButtonsContainer && getWidth(this._$beforeButtonsContainer);\n    return null !== buttonsBeforeWidth && void 0 !== buttonsBeforeWidth ? buttonsBeforeWidth : 0;\n  },\n  _updateLabelWidth: function () {\n    this._label.updateBeforeWidth(this._getLabelBeforeWidth());\n\n    this._label.updateMaxWidth(this._getLabelContainerWidth());\n  },\n  _renderLabel: function () {\n    this._cleanLabelObservable();\n\n    this._labelContainerElement = $(this._getLabelContainer()).get(0);\n    var {\n      label: label,\n      labelMode: labelMode,\n      labelMark: labelMark\n    } = this.option();\n    var labelConfig = {\n      $editor: this.$element(),\n      text: label,\n      mark: labelMark,\n      mode: labelMode,\n      containsButtonsBefore: !!this._$beforeButtonsContainer,\n      containerWidth: this._getLabelContainerWidth(),\n      beforeWidth: this._getLabelBeforeWidth()\n    };\n    this._label = new TextEditorLabelCreator(labelConfig);\n\n    if (this._labelContainerElement) {\n      resizeObserverSingleton.observe(this._labelContainerElement, this._updateLabelWidth.bind(this));\n    }\n  },\n  _renderPlaceholder: function () {\n    this._renderPlaceholderMarkup();\n\n    this._attachPlaceholderEvents();\n  },\n  _renderPlaceholderMarkup: function () {\n    if (this._$placeholder) {\n      this._$placeholder.remove();\n\n      this._$placeholder = null;\n    }\n\n    var $input = this._input();\n\n    var placeholderText = this.option(\"placeholder\");\n    var $placeholder = this._$placeholder = $(\"<div>\").attr(\"data-dx_placeholder\", placeholderText);\n    $placeholder.insertAfter($input);\n    $placeholder.addClass(TEXTEDITOR_PLACEHOLDER_CLASS);\n  },\n  _attachPlaceholderEvents: function () {\n    var startEvent = addNamespace(pointerEvents.up, this.NAME);\n    eventsEngine.on(this._$placeholder, startEvent, () => {\n      eventsEngine.trigger(this._input(), \"focus\");\n    });\n\n    this._toggleEmptinessEventHandler();\n  },\n  _placeholder: function () {\n    return this._$placeholder || $();\n  },\n  _clearValueHandler: function (e) {\n    var $input = this._input();\n\n    e.stopPropagation();\n\n    this._saveValueChangeEvent(e);\n\n    this._clearValue();\n\n    !this._isFocused() && eventsEngine.trigger($input, \"focus\");\n    eventsEngine.trigger($input, \"input\");\n  },\n  _clearValue: function () {\n    this.reset();\n  },\n  _renderEvents: function () {\n    var $input = this._input();\n\n    each(EVENTS_LIST, (_, event) => {\n      if (this.hasActionSubscription(\"on\" + event)) {\n        var action = this._createActionByOption(\"on\" + event, {\n          excludeValidators: [\"readOnly\"]\n        });\n\n        eventsEngine.on($input, addNamespace(event.toLowerCase(), this.NAME), e => {\n          if (this._disposed) {\n            return;\n          }\n\n          action({\n            event: e\n          });\n        });\n      }\n    });\n  },\n  _refreshEvents: function () {\n    var $input = this._input();\n\n    each(EVENTS_LIST, (_, event) => {\n      eventsEngine.off($input, addNamespace(event.toLowerCase(), this.NAME));\n    });\n\n    this._renderEvents();\n  },\n  _keyPressHandler: function () {\n    this.option(\"text\", this._input().val());\n  },\n  _keyDownHandler: function (e) {\n    var $input = this._input();\n\n    var isCtrlEnter = e.ctrlKey && \"enter\" === normalizeKeyName(e);\n    var isNewValue = $input.val() !== this.option(\"value\");\n\n    if (isCtrlEnter && isNewValue) {\n      eventsEngine.trigger($input, \"change\");\n    }\n  },\n  _renderValueChangeEvent: function () {\n    var keyPressEvent = addNamespace(this._renderValueEventName(), \"\".concat(this.NAME, \"TextChange\"));\n    var valueChangeEvent = addNamespace(this.option(\"valueChangeEvent\"), \"\".concat(this.NAME, \"ValueChange\"));\n    var keyDownEvent = addNamespace(\"keydown\", \"\".concat(this.NAME, \"TextChange\"));\n\n    var $input = this._input();\n\n    eventsEngine.on($input, keyPressEvent, this._keyPressHandler.bind(this));\n    eventsEngine.on($input, valueChangeEvent, this._valueChangeEventHandler.bind(this));\n    eventsEngine.on($input, keyDownEvent, this._keyDownHandler.bind(this));\n  },\n  _cleanValueChangeEvent: function () {\n    var valueChangeNamespace = \".\".concat(this.NAME, \"ValueChange\");\n    var textChangeNamespace = \".\".concat(this.NAME, \"TextChange\");\n    eventsEngine.off(this._input(), valueChangeNamespace);\n    eventsEngine.off(this._input(), textChangeNamespace);\n  },\n  _refreshValueChangeEvent: function () {\n    this._cleanValueChangeEvent();\n\n    this._renderValueChangeEvent();\n  },\n  _renderValueEventName: function () {\n    return \"input change keypress\";\n  },\n  _focusTarget: function () {\n    return this._input();\n  },\n  _focusEventTarget: function () {\n    return this.element();\n  },\n  _isInput: function (element) {\n    return element === this._input().get(0);\n  },\n  _preventNestedFocusEvent: function (event) {\n    if (event.isDefaultPrevented()) {\n      return true;\n    }\n\n    var result = this._isNestedTarget(event.relatedTarget);\n\n    if (\"focusin\" === event.type) {\n      result = result && this._isNestedTarget(event.target) && !this._isInput(event.target);\n    }\n\n    result && event.preventDefault();\n    return result;\n  },\n  _isNestedTarget: function (target) {\n    return !!this.$element().find(target).length;\n  },\n  _focusClassTarget: function () {\n    return this.$element();\n  },\n  _focusInHandler: function (event) {\n    this._preventNestedFocusEvent(event);\n\n    this.callBase.apply(this, arguments);\n  },\n  _focusOutHandler: function (event) {\n    this._preventNestedFocusEvent(event);\n\n    this.callBase.apply(this, arguments);\n  },\n  _toggleFocusClass: function (isFocused, $element) {\n    this.callBase(isFocused, this._focusClassTarget($element));\n  },\n  _hasFocusClass: function (element) {\n    return this.callBase($(element || this.$element()));\n  },\n  _renderEmptinessEvent: function () {\n    var $input = this._input();\n\n    eventsEngine.on($input, \"input blur\", this._toggleEmptinessEventHandler.bind(this));\n  },\n  _toggleEmptinessEventHandler: function () {\n    var text = this._input().val();\n\n    var isEmpty = (\"\" === text || null === text) && this._isValueValid();\n\n    this._toggleEmptiness(isEmpty);\n  },\n  _valueChangeEventHandler: function (e, formattedValue) {\n    if (this.option(\"readOnly\")) {\n      return;\n    }\n\n    this._saveValueChangeEvent(e);\n\n    this.option(\"value\", arguments.length > 1 ? formattedValue : this._input().val());\n\n    this._saveValueChangeEvent(void 0);\n  },\n  _renderEnterKeyAction: function () {\n    this._enterKeyAction = this._createActionByOption(\"onEnterKey\", {\n      excludeValidators: [\"readOnly\"]\n    });\n    eventsEngine.off(this._input(), \"keyup.onEnterKey.dxTextEditor\");\n    eventsEngine.on(this._input(), \"keyup.onEnterKey.dxTextEditor\", this._enterKeyHandlerUp.bind(this));\n  },\n  _enterKeyHandlerUp: function (e) {\n    if (this._disposed) {\n      return;\n    }\n\n    if (\"enter\" === normalizeKeyName(e)) {\n      this._enterKeyAction({\n        event: e\n      });\n    }\n  },\n  _updateValue: function () {\n    this._options.silent(\"text\", null);\n\n    this._renderValue();\n  },\n  _dispose: function () {\n    this._enterKeyAction = void 0;\n    this.callBase();\n  },\n  _getSubmitElement: function () {\n    return this._input();\n  },\n  _hasActiveElement: function () {\n    return this._input().is(domAdapter.getActiveElement());\n  },\n  _optionChanged: function (args) {\n    var {\n      name: name,\n      fullName: fullName,\n      value: value\n    } = args;\n\n    if (inArray(name.replace(\"on\", \"\"), EVENTS_LIST) > -1) {\n      this._refreshEvents();\n\n      return;\n    }\n\n    switch (name) {\n      case \"valueChangeEvent\":\n        this._refreshValueChangeEvent();\n\n        this._refreshFocusEvent();\n\n        this._refreshEvents();\n\n        break;\n\n      case \"onValueChanged\":\n        this._createValueChangeAction();\n\n        break;\n\n      case \"focusStateEnabled\":\n        this.callBase(args);\n\n        this._toggleTabIndex();\n\n        break;\n\n      case \"spellcheck\":\n        this._toggleSpellcheckState();\n\n        break;\n\n      case \"mode\":\n        this._renderInputType();\n\n        break;\n\n      case \"onEnterKey\":\n        this._renderEnterKeyAction();\n\n        break;\n\n      case \"placeholder\":\n        this._renderPlaceholder();\n\n        break;\n\n      case \"label\":\n        this._label.updateText(value);\n\n        break;\n\n      case \"labelMark\":\n        this._label.updateMark(value);\n\n        break;\n\n      case \"labelMode\":\n        this._label.updateMode(value);\n\n        break;\n\n      case \"width\":\n        this.callBase(args);\n\n        this._label.updateMaxWidth(this._getLabelContainerWidth());\n\n        break;\n\n      case \"readOnly\":\n      case \"disabled\":\n        this._updateButtons();\n\n        this.callBase(args);\n        break;\n\n      case \"showClearButton\":\n        this._updateButtons([\"clear\"]);\n\n        break;\n\n      case \"text\":\n        break;\n\n      case \"value\":\n        this._updateValue();\n\n        this.callBase(args);\n        break;\n\n      case \"inputAttr\":\n        this._applyInputAttributes(this._input(), this.option(name));\n\n        break;\n\n      case \"stylingMode\":\n        this._renderStylingMode();\n\n        this._updateLabelWidth();\n\n        break;\n\n      case \"buttons\":\n        if (fullName === name) {\n          checkButtonsOptionType(value);\n        }\n\n        this._cleanButtonContainers();\n\n        this._renderButtonContainers();\n\n        this._updateButtonsStyling(this.option(\"stylingMode\"));\n\n        this._updateLabelWidth();\n\n        this._label.updateContainsButtonsBefore(0 !== value.length);\n\n        break;\n\n      case \"visible\":\n        this.callBase(args);\n\n        if (value && this.option(\"buttons\")) {\n          this._cleanButtonContainers();\n\n          this._renderButtonContainers();\n\n          this._updateButtonsStyling(this.option(\"stylingMode\"));\n        }\n\n        break;\n\n      case \"displayValueFormatter\":\n        this._invalidate();\n\n        break;\n\n      case \"showValidationMark\":\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _renderInputType: function () {\n    this._setInputType(this.option(\"mode\"));\n  },\n  _setInputType: function (type) {\n    var input = this._input();\n\n    if (\"search\" === type) {\n      type = \"text\";\n    }\n\n    try {\n      input.prop(\"type\", type);\n    } catch (e) {\n      input.prop(\"type\", \"text\");\n    }\n  },\n\n  getButton(name) {\n    return this._buttonCollection.getButton(name);\n  },\n\n  focus: function () {\n    eventsEngine.trigger(this._input(), \"focus\");\n  },\n  reset: function () {\n    if (this._showValidMark) {\n      this._showValidMark = false;\n\n      this._renderValidationState();\n    }\n\n    var defaultOptions = this._getDefaultOptions();\n\n    if (this.option(\"value\") === defaultOptions.value) {\n      this._options.silent(\"text\", \"\");\n\n      this._renderValue();\n    } else {\n      this.option(\"value\", defaultOptions.value);\n    }\n  },\n  on: function (eventName, eventHandler) {\n    var result = this.callBase(eventName, eventHandler);\n    var event = eventName.charAt(0).toUpperCase() + eventName.substr(1);\n\n    if (EVENTS_LIST.indexOf(event) >= 0) {\n      this._refreshEvents();\n    }\n\n    return result;\n  }\n});\nexport default TextEditorBase;","map":{"version":3,"sources":["C:/Users/ciara/OneDrive - GMIT/Coin A-Z Test Repo/frontend/node_modules/devextreme/esm/ui/text_box/ui.text_editor.base.js"],"names":["$","domAdapter","eventsEngine","focused","isDefined","extend","inArray","each","current","isMaterial","devices","Editor","addNamespace","normalizeKeyName","pointerEvents","ClearButton","TextEditorButtonCollection","config","errors","Deferred","LoadIndicator","TextEditorLabel","getWidth","resizeObserverSingleton","TEXTEDITOR_CLASS","TEXTEDITOR_INPUT_CONTAINER_CLASS","TEXTEDITOR_INPUT_CLASS","TEXTEDITOR_INPUT_SELECTOR","TEXTEDITOR_CONTAINER_CLASS","TEXTEDITOR_BUTTONS_CONTAINER_CLASS","TEXTEDITOR_PLACEHOLDER_CLASS","TEXTEDITOR_EMPTY_INPUT_CLASS","STATE_INVISIBLE_CLASS","TEXTEDITOR_PENDING_INDICATOR_CLASS","TEXTEDITOR_VALIDATION_PENDING_CLASS","TEXTEDITOR_VALID_CLASS","EVENTS_LIST","CONTROL_KEYS","TextEditorLabelCreator","checkButtonsOptionType","buttons","Array","isArray","Error","TextEditorBase","inherit","ctor","_","options","_buttonCollection","_getDefaultButtons","_$beforeButtonsContainer","_$afterButtonsContainer","_labelContainerElement","callBase","apply","arguments","_getDefaultOptions","value","spellcheck","showClearButton","valueChangeEvent","placeholder","inputAttr","onFocusIn","onFocusOut","onKeyDown","onKeyUp","onChange","onInput","onCut","onCopy","onPaste","onEnterKey","mode","hoverStateEnabled","focusStateEnabled","text","displayValueFormatter","stylingMode","editorStylingMode","showValidationMark","label","labelMode","labelMark","_defaultOptionsRules","themeName","concat","device","name","Ctor","_isClearButtonVisible","option","_input","$element","find","first","_isFocused","_inputWrapper","_buttonsContainer","eq","_isControlKey","key","indexOf","_renderStylingMode","_updateButtonsStyling","_initMarkup","addClass","_renderInput","_renderInputType","_renderPlaceholder","_renderProps","_renderValue","_renderLabel","_render","_refreshValueChangeEvent","_renderEvents","_renderEnterKeyAction","_renderEmptinessEvent","_$buttonsContainer","_$textEditorContainer","appendTo","_$textEditorInputContainer","append","_createInput","_renderButtonContainers","_getInputContainer","_renderPendingIndicator","$inputContainer","$indicatorElement","_pendingIndicator","_createComponent","_disposePendingIndicator","dispose","remove","removeClass","_renderValidationState","isPending","_showValidMark","toggleClass","renderBeforeButtons","renderAfterButtons","_cleanButtonContainers","_this$_$beforeButtons","_this$_$afterButtonsC","clean","_clean","_cleanLabelObservable","$input","_applyInputAttributes","_setSubmitElementName","inputAttrName","customAttributes","inputAttributes","_getDefaultAttributes","attr","css","defaultAttributes","autocomplete","ios","mac","real","_updateButtons","names","updateButtons","_ref","buttonName","buttonInstance","getButton","renderInputPromise","_renderInputValue","promise","_value","displayValue","val","_renderDisplayText","_toggleEmptinessEventHandler","resolve","_isValueValid","length","validity","get","valid","_toggleEmptiness","isEmpty","_togglePlaceholder","_toggleReadOnlyState","_toggleSpellcheckState","_toggleTabIndex","_toggleDisabledState","prop","disabled","removeAttr","_readOnlyPropValue","unobserve","_getLabelContainer","_getLabelContainerWidth","_getLabelBeforeWidth","buttonsBeforeWidth","_updateLabelWidth","_label","updateBeforeWidth","updateMaxWidth","labelConfig","$editor","mark","containsButtonsBefore","containerWidth","beforeWidth","observe","bind","_renderPlaceholderMarkup","_attachPlaceholderEvents","_$placeholder","placeholderText","$placeholder","insertAfter","startEvent","up","NAME","on","trigger","_placeholder","_clearValueHandler","e","stopPropagation","_saveValueChangeEvent","_clearValue","reset","event","hasActionSubscription","action","_createActionByOption","excludeValidators","toLowerCase","_disposed","_refreshEvents","off","_keyPressHandler","_keyDownHandler","isCtrlEnter","ctrlKey","isNewValue","_renderValueChangeEvent","keyPressEvent","_renderValueEventName","keyDownEvent","_valueChangeEventHandler","_cleanValueChangeEvent","valueChangeNamespace","textChangeNamespace","_focusTarget","_focusEventTarget","element","_isInput","_preventNestedFocusEvent","isDefaultPrevented","result","_isNestedTarget","relatedTarget","type","target","preventDefault","_focusClassTarget","_focusInHandler","_focusOutHandler","_toggleFocusClass","isFocused","_hasFocusClass","formattedValue","_enterKeyAction","_enterKeyHandlerUp","_updateValue","_options","silent","_dispose","_getSubmitElement","_hasActiveElement","is","getActiveElement","_optionChanged","args","fullName","replace","_refreshFocusEvent","_createValueChangeAction","updateText","updateMark","updateMode","updateContainsButtonsBefore","_invalidate","_setInputType","input","focus","defaultOptions","eventName","eventHandler","charAt","toUpperCase","substr"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/ui/text_box/ui.text_editor.base.js)\r\n * Version: 21.2.5\r\n * Build date: Mon Jan 17 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    focused\r\n} from \"../widget/selectors\";\r\nimport {\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    inArray\r\n} from \"../../core/utils/array\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport {\r\n    current,\r\n    isMaterial\r\n} from \"../themes\";\r\nimport devices from \"../../core/devices\";\r\nimport Editor from \"../editor/editor\";\r\nimport {\r\n    addNamespace,\r\n    normalizeKeyName\r\n} from \"../../events/utils/index\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport ClearButton from \"./ui.text_editor.clear\";\r\nimport TextEditorButtonCollection from \"./texteditor_button_collection/index\";\r\nimport config from \"../../core/config\";\r\nimport errors from \"../widget/ui.errors\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport LoadIndicator from \"../load_indicator\";\r\nimport {\r\n    TextEditorLabel\r\n} from \"./ui.text_editor.label\";\r\nimport {\r\n    getWidth\r\n} from \"../../core/utils/size\";\r\nimport resizeObserverSingleton from \"../../core/resize_observer\";\r\nvar TEXTEDITOR_CLASS = \"dx-texteditor\";\r\nvar TEXTEDITOR_INPUT_CONTAINER_CLASS = \"dx-texteditor-input-container\";\r\nvar TEXTEDITOR_INPUT_CLASS = \"dx-texteditor-input\";\r\nvar TEXTEDITOR_INPUT_SELECTOR = \".\" + TEXTEDITOR_INPUT_CLASS;\r\nvar TEXTEDITOR_CONTAINER_CLASS = \"dx-texteditor-container\";\r\nvar TEXTEDITOR_BUTTONS_CONTAINER_CLASS = \"dx-texteditor-buttons-container\";\r\nvar TEXTEDITOR_PLACEHOLDER_CLASS = \"dx-placeholder\";\r\nvar TEXTEDITOR_EMPTY_INPUT_CLASS = \"dx-texteditor-empty\";\r\nvar STATE_INVISIBLE_CLASS = \"dx-state-invisible\";\r\nvar TEXTEDITOR_PENDING_INDICATOR_CLASS = \"dx-pending-indicator\";\r\nvar TEXTEDITOR_VALIDATION_PENDING_CLASS = \"dx-validation-pending\";\r\nvar TEXTEDITOR_VALID_CLASS = \"dx-valid\";\r\nvar EVENTS_LIST = [\"KeyDown\", \"KeyPress\", \"KeyUp\", \"Change\", \"Cut\", \"Copy\", \"Paste\", \"Input\"];\r\nvar CONTROL_KEYS = [\"tab\", \"enter\", \"shift\", \"control\", \"alt\", \"escape\", \"pageUp\", \"pageDown\", \"end\", \"home\", \"leftArrow\", \"upArrow\", \"rightArrow\", \"downArrow\"];\r\nvar TextEditorLabelCreator = TextEditorLabel;\r\n\r\nfunction checkButtonsOptionType(buttons) {\r\n    if (isDefined(buttons) && !Array.isArray(buttons)) {\r\n        throw errors.Error(\"E1053\")\r\n    }\r\n}\r\nvar TextEditorBase = Editor.inherit({\r\n    ctor: function(_, options) {\r\n        if (options) {\r\n            checkButtonsOptionType(options.buttons)\r\n        }\r\n        this._buttonCollection = new TextEditorButtonCollection(this, this._getDefaultButtons());\r\n        this._$beforeButtonsContainer = null;\r\n        this._$afterButtonsContainer = null;\r\n        this._labelContainerElement = null;\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            buttons: void 0,\r\n            value: \"\",\r\n            spellcheck: false,\r\n            showClearButton: false,\r\n            valueChangeEvent: \"change\",\r\n            placeholder: \"\",\r\n            inputAttr: {},\r\n            onFocusIn: null,\r\n            onFocusOut: null,\r\n            onKeyDown: null,\r\n            onKeyUp: null,\r\n            onChange: null,\r\n            onInput: null,\r\n            onCut: null,\r\n            onCopy: null,\r\n            onPaste: null,\r\n            onEnterKey: null,\r\n            mode: \"text\",\r\n            hoverStateEnabled: true,\r\n            focusStateEnabled: true,\r\n            text: void 0,\r\n            displayValueFormatter: function(value) {\r\n                return isDefined(value) && false !== value ? value : \"\"\r\n            },\r\n            stylingMode: config().editorStylingMode || \"outlined\",\r\n            showValidationMark: true,\r\n            label: \"\",\r\n            labelMode: \"static\",\r\n            labelMark: \"\"\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        var themeName = current();\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return isMaterial(themeName)\r\n            },\r\n            options: {\r\n                stylingMode: config().editorStylingMode || \"filled\",\r\n                labelMode: \"floating\"\r\n            }\r\n        }])\r\n    },\r\n    _getDefaultButtons: function() {\r\n        return [{\r\n            name: \"clear\",\r\n            Ctor: ClearButton\r\n        }]\r\n    },\r\n    _isClearButtonVisible: function() {\r\n        return this.option(\"showClearButton\") && !this.option(\"readOnly\")\r\n    },\r\n    _input: function() {\r\n        return this.$element().find(TEXTEDITOR_INPUT_SELECTOR).first()\r\n    },\r\n    _isFocused: function() {\r\n        return focused(this._input()) || this.callBase()\r\n    },\r\n    _inputWrapper: function() {\r\n        return this.$element()\r\n    },\r\n    _buttonsContainer: function() {\r\n        return this._inputWrapper().find(\".\" + TEXTEDITOR_BUTTONS_CONTAINER_CLASS).eq(0)\r\n    },\r\n    _isControlKey: function(key) {\r\n        return -1 !== CONTROL_KEYS.indexOf(key)\r\n    },\r\n    _renderStylingMode: function() {\r\n        this.callBase();\r\n        this._updateButtonsStyling(this.option(\"stylingMode\"))\r\n    },\r\n    _initMarkup: function() {\r\n        this.$element().addClass(TEXTEDITOR_CLASS);\r\n        this._renderInput();\r\n        this._renderStylingMode();\r\n        this._renderInputType();\r\n        this._renderPlaceholder();\r\n        this._renderProps();\r\n        this.callBase();\r\n        this._renderValue();\r\n        this._renderLabel()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._refreshValueChangeEvent();\r\n        this._renderEvents();\r\n        this._renderEnterKeyAction();\r\n        this._renderEmptinessEvent()\r\n    },\r\n    _renderInput: function() {\r\n        this._$buttonsContainer = this._$textEditorContainer = $(\"<div>\").addClass(TEXTEDITOR_CONTAINER_CLASS).appendTo(this.$element());\r\n        this._$textEditorInputContainer = $(\"<div>\").addClass(TEXTEDITOR_INPUT_CONTAINER_CLASS).appendTo(this._$textEditorContainer);\r\n        this._$textEditorInputContainer.append(this._createInput());\r\n        this._renderButtonContainers()\r\n    },\r\n    _getInputContainer() {\r\n        return this._$textEditorInputContainer\r\n    },\r\n    _renderPendingIndicator: function() {\r\n        this.$element().addClass(TEXTEDITOR_VALIDATION_PENDING_CLASS);\r\n        var $inputContainer = this._getInputContainer();\r\n        var $indicatorElement = $(\"<div>\").addClass(TEXTEDITOR_PENDING_INDICATOR_CLASS).appendTo($inputContainer);\r\n        this._pendingIndicator = this._createComponent($indicatorElement, LoadIndicator)\r\n    },\r\n    _disposePendingIndicator: function() {\r\n        if (!this._pendingIndicator) {\r\n            return\r\n        }\r\n        this._pendingIndicator.dispose();\r\n        this._pendingIndicator.$element().remove();\r\n        this._pendingIndicator = null;\r\n        this.$element().removeClass(TEXTEDITOR_VALIDATION_PENDING_CLASS)\r\n    },\r\n    _renderValidationState: function() {\r\n        this.callBase();\r\n        var isPending = \"pending\" === this.option(\"validationStatus\");\r\n        var $element = this.$element();\r\n        if (isPending) {\r\n            !this._pendingIndicator && this._renderPendingIndicator();\r\n            this._showValidMark = false\r\n        } else {\r\n            if (\"invalid\" === this.option(\"validationStatus\")) {\r\n                this._showValidMark = false\r\n            }\r\n            if (!this._showValidMark && true === this.option(\"showValidationMark\")) {\r\n                this._showValidMark = \"valid\" === this.option(\"validationStatus\") && !!this._pendingIndicator\r\n            }\r\n            this._disposePendingIndicator()\r\n        }\r\n        $element.toggleClass(TEXTEDITOR_VALID_CLASS, !!this._showValidMark)\r\n    },\r\n    _renderButtonContainers: function() {\r\n        var buttons = this.option(\"buttons\");\r\n        this._$beforeButtonsContainer = this._buttonCollection.renderBeforeButtons(buttons, this._$buttonsContainer);\r\n        this._$afterButtonsContainer = this._buttonCollection.renderAfterButtons(buttons, this._$buttonsContainer)\r\n    },\r\n    _cleanButtonContainers: function() {\r\n        var _this$_$beforeButtons, _this$_$afterButtonsC;\r\n        null === (_this$_$beforeButtons = this._$beforeButtonsContainer) || void 0 === _this$_$beforeButtons ? void 0 : _this$_$beforeButtons.remove();\r\n        null === (_this$_$afterButtonsC = this._$afterButtonsContainer) || void 0 === _this$_$afterButtonsC ? void 0 : _this$_$afterButtonsC.remove();\r\n        this._buttonCollection.clean()\r\n    },\r\n    _clean() {\r\n        this._buttonCollection.clean();\r\n        this._disposePendingIndicator();\r\n        this._cleanLabelObservable();\r\n        this._$beforeButtonsContainer = null;\r\n        this._$afterButtonsContainer = null;\r\n        this._$textEditorContainer = null;\r\n        this._$buttonsContainer = null;\r\n        this.callBase()\r\n    },\r\n    _createInput: function() {\r\n        var $input = $(\"<input>\");\r\n        this._applyInputAttributes($input, this.option(\"inputAttr\"));\r\n        return $input\r\n    },\r\n    _setSubmitElementName: function(name) {\r\n        var inputAttrName = this.option(\"inputAttr.name\");\r\n        return this.callBase(name || inputAttrName || \"\")\r\n    },\r\n    _applyInputAttributes: function($input, customAttributes) {\r\n        var inputAttributes = extend(this._getDefaultAttributes(), customAttributes);\r\n        $input.attr(inputAttributes).addClass(TEXTEDITOR_INPUT_CLASS).css(\"minHeight\", this.option(\"height\") ? \"0\" : \"\")\r\n    },\r\n    _getDefaultAttributes: function() {\r\n        var defaultAttributes = {\r\n            autocomplete: \"off\"\r\n        };\r\n        var {\r\n            ios: ios,\r\n            mac: mac\r\n        } = devices.real();\r\n        if (ios || mac) {\r\n            defaultAttributes.placeholder = \" \"\r\n        }\r\n        return defaultAttributes\r\n    },\r\n    _updateButtons: function(names) {\r\n        this._buttonCollection.updateButtons(names)\r\n    },\r\n    _updateButtonsStyling: function(editorStylingMode) {\r\n        each(this.option(\"buttons\"), (_, _ref) => {\r\n            var {\r\n                options: options,\r\n                name: buttonName\r\n            } = _ref;\r\n            if (options && !options.stylingMode && this.option(\"visible\")) {\r\n                var buttonInstance = this.getButton(buttonName);\r\n                buttonInstance.option && buttonInstance.option(\"stylingMode\", \"underlined\" === editorStylingMode ? \"text\" : \"contained\")\r\n            }\r\n        })\r\n    },\r\n    _renderValue: function() {\r\n        var renderInputPromise = this._renderInputValue();\r\n        return renderInputPromise.promise()\r\n    },\r\n    _renderInputValue: function(value) {\r\n        var _value;\r\n        value = null !== (_value = value) && void 0 !== _value ? _value : this.option(\"value\");\r\n        var text = this.option(\"text\");\r\n        var displayValue = this.option(\"displayValue\");\r\n        var displayValueFormatter = this.option(\"displayValueFormatter\");\r\n        if (void 0 !== displayValue && null !== value) {\r\n            text = displayValueFormatter(displayValue)\r\n        } else if (!isDefined(text)) {\r\n            text = displayValueFormatter(value)\r\n        }\r\n        this.option(\"text\", text);\r\n        if (this._input().val() !== (isDefined(text) ? text : \"\")) {\r\n            this._renderDisplayText(text)\r\n        } else {\r\n            this._toggleEmptinessEventHandler()\r\n        }\r\n        return (new Deferred).resolve()\r\n    },\r\n    _renderDisplayText: function(text) {\r\n        this._input().val(text);\r\n        this._toggleEmptinessEventHandler()\r\n    },\r\n    _isValueValid: function() {\r\n        if (this._input().length) {\r\n            var validity = this._input().get(0).validity;\r\n            if (validity) {\r\n                return validity.valid\r\n            }\r\n        }\r\n        return true\r\n    },\r\n    _toggleEmptiness: function(isEmpty) {\r\n        this.$element().toggleClass(TEXTEDITOR_EMPTY_INPUT_CLASS, isEmpty);\r\n        this._togglePlaceholder(isEmpty)\r\n    },\r\n    _togglePlaceholder: function(isEmpty) {\r\n        this.$element().find(\".\".concat(TEXTEDITOR_PLACEHOLDER_CLASS)).eq(0).toggleClass(STATE_INVISIBLE_CLASS, !isEmpty)\r\n    },\r\n    _renderProps: function() {\r\n        this._toggleReadOnlyState();\r\n        this._toggleSpellcheckState();\r\n        this._toggleTabIndex()\r\n    },\r\n    _toggleDisabledState: function(value) {\r\n        this.callBase.apply(this, arguments);\r\n        var $input = this._input();\r\n        $input.prop(\"disabled\", value)\r\n    },\r\n    _toggleTabIndex: function() {\r\n        var $input = this._input();\r\n        var disabled = this.option(\"disabled\");\r\n        var focusStateEnabled = this.option(\"focusStateEnabled\");\r\n        if (disabled || !focusStateEnabled) {\r\n            $input.attr(\"tabIndex\", -1)\r\n        } else {\r\n            $input.removeAttr(\"tabIndex\")\r\n        }\r\n    },\r\n    _toggleReadOnlyState: function() {\r\n        this._input().prop(\"readOnly\", this._readOnlyPropValue());\r\n        this.callBase()\r\n    },\r\n    _readOnlyPropValue: function() {\r\n        return this.option(\"readOnly\")\r\n    },\r\n    _toggleSpellcheckState: function() {\r\n        this._input().prop(\"spellcheck\", this.option(\"spellcheck\"))\r\n    },\r\n    _cleanLabelObservable: function() {\r\n        if (this._labelContainerElement) {\r\n            resizeObserverSingleton.unobserve(this._labelContainerElement);\r\n            this._labelContainerElement = null\r\n        }\r\n    },\r\n    _getLabelContainer: function() {\r\n        return this._input()\r\n    },\r\n    _getLabelContainerWidth: function() {\r\n        return getWidth(this._getLabelContainer())\r\n    },\r\n    _getLabelBeforeWidth: function() {\r\n        var buttonsBeforeWidth = this._$beforeButtonsContainer && getWidth(this._$beforeButtonsContainer);\r\n        return null !== buttonsBeforeWidth && void 0 !== buttonsBeforeWidth ? buttonsBeforeWidth : 0\r\n    },\r\n    _updateLabelWidth: function() {\r\n        this._label.updateBeforeWidth(this._getLabelBeforeWidth());\r\n        this._label.updateMaxWidth(this._getLabelContainerWidth())\r\n    },\r\n    _renderLabel: function() {\r\n        this._cleanLabelObservable();\r\n        this._labelContainerElement = $(this._getLabelContainer()).get(0);\r\n        var {\r\n            label: label,\r\n            labelMode: labelMode,\r\n            labelMark: labelMark\r\n        } = this.option();\r\n        var labelConfig = {\r\n            $editor: this.$element(),\r\n            text: label,\r\n            mark: labelMark,\r\n            mode: labelMode,\r\n            containsButtonsBefore: !!this._$beforeButtonsContainer,\r\n            containerWidth: this._getLabelContainerWidth(),\r\n            beforeWidth: this._getLabelBeforeWidth()\r\n        };\r\n        this._label = new TextEditorLabelCreator(labelConfig);\r\n        if (this._labelContainerElement) {\r\n            resizeObserverSingleton.observe(this._labelContainerElement, this._updateLabelWidth.bind(this))\r\n        }\r\n    },\r\n    _renderPlaceholder: function() {\r\n        this._renderPlaceholderMarkup();\r\n        this._attachPlaceholderEvents()\r\n    },\r\n    _renderPlaceholderMarkup: function() {\r\n        if (this._$placeholder) {\r\n            this._$placeholder.remove();\r\n            this._$placeholder = null\r\n        }\r\n        var $input = this._input();\r\n        var placeholderText = this.option(\"placeholder\");\r\n        var $placeholder = this._$placeholder = $(\"<div>\").attr(\"data-dx_placeholder\", placeholderText);\r\n        $placeholder.insertAfter($input);\r\n        $placeholder.addClass(TEXTEDITOR_PLACEHOLDER_CLASS)\r\n    },\r\n    _attachPlaceholderEvents: function() {\r\n        var startEvent = addNamespace(pointerEvents.up, this.NAME);\r\n        eventsEngine.on(this._$placeholder, startEvent, () => {\r\n            eventsEngine.trigger(this._input(), \"focus\")\r\n        });\r\n        this._toggleEmptinessEventHandler()\r\n    },\r\n    _placeholder: function() {\r\n        return this._$placeholder || $()\r\n    },\r\n    _clearValueHandler: function(e) {\r\n        var $input = this._input();\r\n        e.stopPropagation();\r\n        this._saveValueChangeEvent(e);\r\n        this._clearValue();\r\n        !this._isFocused() && eventsEngine.trigger($input, \"focus\");\r\n        eventsEngine.trigger($input, \"input\")\r\n    },\r\n    _clearValue: function() {\r\n        this.reset()\r\n    },\r\n    _renderEvents: function() {\r\n        var $input = this._input();\r\n        each(EVENTS_LIST, (_, event) => {\r\n            if (this.hasActionSubscription(\"on\" + event)) {\r\n                var action = this._createActionByOption(\"on\" + event, {\r\n                    excludeValidators: [\"readOnly\"]\r\n                });\r\n                eventsEngine.on($input, addNamespace(event.toLowerCase(), this.NAME), e => {\r\n                    if (this._disposed) {\r\n                        return\r\n                    }\r\n                    action({\r\n                        event: e\r\n                    })\r\n                })\r\n            }\r\n        })\r\n    },\r\n    _refreshEvents: function() {\r\n        var $input = this._input();\r\n        each(EVENTS_LIST, (_, event) => {\r\n            eventsEngine.off($input, addNamespace(event.toLowerCase(), this.NAME))\r\n        });\r\n        this._renderEvents()\r\n    },\r\n    _keyPressHandler: function() {\r\n        this.option(\"text\", this._input().val())\r\n    },\r\n    _keyDownHandler: function(e) {\r\n        var $input = this._input();\r\n        var isCtrlEnter = e.ctrlKey && \"enter\" === normalizeKeyName(e);\r\n        var isNewValue = $input.val() !== this.option(\"value\");\r\n        if (isCtrlEnter && isNewValue) {\r\n            eventsEngine.trigger($input, \"change\")\r\n        }\r\n    },\r\n    _renderValueChangeEvent: function() {\r\n        var keyPressEvent = addNamespace(this._renderValueEventName(), \"\".concat(this.NAME, \"TextChange\"));\r\n        var valueChangeEvent = addNamespace(this.option(\"valueChangeEvent\"), \"\".concat(this.NAME, \"ValueChange\"));\r\n        var keyDownEvent = addNamespace(\"keydown\", \"\".concat(this.NAME, \"TextChange\"));\r\n        var $input = this._input();\r\n        eventsEngine.on($input, keyPressEvent, this._keyPressHandler.bind(this));\r\n        eventsEngine.on($input, valueChangeEvent, this._valueChangeEventHandler.bind(this));\r\n        eventsEngine.on($input, keyDownEvent, this._keyDownHandler.bind(this))\r\n    },\r\n    _cleanValueChangeEvent: function() {\r\n        var valueChangeNamespace = \".\".concat(this.NAME, \"ValueChange\");\r\n        var textChangeNamespace = \".\".concat(this.NAME, \"TextChange\");\r\n        eventsEngine.off(this._input(), valueChangeNamespace);\r\n        eventsEngine.off(this._input(), textChangeNamespace)\r\n    },\r\n    _refreshValueChangeEvent: function() {\r\n        this._cleanValueChangeEvent();\r\n        this._renderValueChangeEvent()\r\n    },\r\n    _renderValueEventName: function() {\r\n        return \"input change keypress\"\r\n    },\r\n    _focusTarget: function() {\r\n        return this._input()\r\n    },\r\n    _focusEventTarget: function() {\r\n        return this.element()\r\n    },\r\n    _isInput: function(element) {\r\n        return element === this._input().get(0)\r\n    },\r\n    _preventNestedFocusEvent: function(event) {\r\n        if (event.isDefaultPrevented()) {\r\n            return true\r\n        }\r\n        var result = this._isNestedTarget(event.relatedTarget);\r\n        if (\"focusin\" === event.type) {\r\n            result = result && this._isNestedTarget(event.target) && !this._isInput(event.target)\r\n        }\r\n        result && event.preventDefault();\r\n        return result\r\n    },\r\n    _isNestedTarget: function(target) {\r\n        return !!this.$element().find(target).length\r\n    },\r\n    _focusClassTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _focusInHandler: function(event) {\r\n        this._preventNestedFocusEvent(event);\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _focusOutHandler: function(event) {\r\n        this._preventNestedFocusEvent(event);\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _toggleFocusClass: function(isFocused, $element) {\r\n        this.callBase(isFocused, this._focusClassTarget($element))\r\n    },\r\n    _hasFocusClass: function(element) {\r\n        return this.callBase($(element || this.$element()))\r\n    },\r\n    _renderEmptinessEvent: function() {\r\n        var $input = this._input();\r\n        eventsEngine.on($input, \"input blur\", this._toggleEmptinessEventHandler.bind(this))\r\n    },\r\n    _toggleEmptinessEventHandler: function() {\r\n        var text = this._input().val();\r\n        var isEmpty = (\"\" === text || null === text) && this._isValueValid();\r\n        this._toggleEmptiness(isEmpty)\r\n    },\r\n    _valueChangeEventHandler: function(e, formattedValue) {\r\n        if (this.option(\"readOnly\")) {\r\n            return\r\n        }\r\n        this._saveValueChangeEvent(e);\r\n        this.option(\"value\", arguments.length > 1 ? formattedValue : this._input().val());\r\n        this._saveValueChangeEvent(void 0)\r\n    },\r\n    _renderEnterKeyAction: function() {\r\n        this._enterKeyAction = this._createActionByOption(\"onEnterKey\", {\r\n            excludeValidators: [\"readOnly\"]\r\n        });\r\n        eventsEngine.off(this._input(), \"keyup.onEnterKey.dxTextEditor\");\r\n        eventsEngine.on(this._input(), \"keyup.onEnterKey.dxTextEditor\", this._enterKeyHandlerUp.bind(this))\r\n    },\r\n    _enterKeyHandlerUp: function(e) {\r\n        if (this._disposed) {\r\n            return\r\n        }\r\n        if (\"enter\" === normalizeKeyName(e)) {\r\n            this._enterKeyAction({\r\n                event: e\r\n            })\r\n        }\r\n    },\r\n    _updateValue: function() {\r\n        this._options.silent(\"text\", null);\r\n        this._renderValue()\r\n    },\r\n    _dispose: function() {\r\n        this._enterKeyAction = void 0;\r\n        this.callBase()\r\n    },\r\n    _getSubmitElement: function() {\r\n        return this._input()\r\n    },\r\n    _hasActiveElement: function() {\r\n        return this._input().is(domAdapter.getActiveElement())\r\n    },\r\n    _optionChanged: function(args) {\r\n        var {\r\n            name: name,\r\n            fullName: fullName,\r\n            value: value\r\n        } = args;\r\n        if (inArray(name.replace(\"on\", \"\"), EVENTS_LIST) > -1) {\r\n            this._refreshEvents();\r\n            return\r\n        }\r\n        switch (name) {\r\n            case \"valueChangeEvent\":\r\n                this._refreshValueChangeEvent();\r\n                this._refreshFocusEvent();\r\n                this._refreshEvents();\r\n                break;\r\n            case \"onValueChanged\":\r\n                this._createValueChangeAction();\r\n                break;\r\n            case \"focusStateEnabled\":\r\n                this.callBase(args);\r\n                this._toggleTabIndex();\r\n                break;\r\n            case \"spellcheck\":\r\n                this._toggleSpellcheckState();\r\n                break;\r\n            case \"mode\":\r\n                this._renderInputType();\r\n                break;\r\n            case \"onEnterKey\":\r\n                this._renderEnterKeyAction();\r\n                break;\r\n            case \"placeholder\":\r\n                this._renderPlaceholder();\r\n                break;\r\n            case \"label\":\r\n                this._label.updateText(value);\r\n                break;\r\n            case \"labelMark\":\r\n                this._label.updateMark(value);\r\n                break;\r\n            case \"labelMode\":\r\n                this._label.updateMode(value);\r\n                break;\r\n            case \"width\":\r\n                this.callBase(args);\r\n                this._label.updateMaxWidth(this._getLabelContainerWidth());\r\n                break;\r\n            case \"readOnly\":\r\n            case \"disabled\":\r\n                this._updateButtons();\r\n                this.callBase(args);\r\n                break;\r\n            case \"showClearButton\":\r\n                this._updateButtons([\"clear\"]);\r\n                break;\r\n            case \"text\":\r\n                break;\r\n            case \"value\":\r\n                this._updateValue();\r\n                this.callBase(args);\r\n                break;\r\n            case \"inputAttr\":\r\n                this._applyInputAttributes(this._input(), this.option(name));\r\n                break;\r\n            case \"stylingMode\":\r\n                this._renderStylingMode();\r\n                this._updateLabelWidth();\r\n                break;\r\n            case \"buttons\":\r\n                if (fullName === name) {\r\n                    checkButtonsOptionType(value)\r\n                }\r\n                this._cleanButtonContainers();\r\n                this._renderButtonContainers();\r\n                this._updateButtonsStyling(this.option(\"stylingMode\"));\r\n                this._updateLabelWidth();\r\n                this._label.updateContainsButtonsBefore(0 !== value.length);\r\n                break;\r\n            case \"visible\":\r\n                this.callBase(args);\r\n                if (value && this.option(\"buttons\")) {\r\n                    this._cleanButtonContainers();\r\n                    this._renderButtonContainers();\r\n                    this._updateButtonsStyling(this.option(\"stylingMode\"))\r\n                }\r\n                break;\r\n            case \"displayValueFormatter\":\r\n                this._invalidate();\r\n                break;\r\n            case \"showValidationMark\":\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _renderInputType: function() {\r\n        this._setInputType(this.option(\"mode\"))\r\n    },\r\n    _setInputType: function(type) {\r\n        var input = this._input();\r\n        if (\"search\" === type) {\r\n            type = \"text\"\r\n        }\r\n        try {\r\n            input.prop(\"type\", type)\r\n        } catch (e) {\r\n            input.prop(\"type\", \"text\")\r\n        }\r\n    },\r\n    getButton(name) {\r\n        return this._buttonCollection.getButton(name)\r\n    },\r\n    focus: function() {\r\n        eventsEngine.trigger(this._input(), \"focus\")\r\n    },\r\n    reset: function() {\r\n        if (this._showValidMark) {\r\n            this._showValidMark = false;\r\n            this._renderValidationState()\r\n        }\r\n        var defaultOptions = this._getDefaultOptions();\r\n        if (this.option(\"value\") === defaultOptions.value) {\r\n            this._options.silent(\"text\", \"\");\r\n            this._renderValue()\r\n        } else {\r\n            this.option(\"value\", defaultOptions.value)\r\n        }\r\n    },\r\n    on: function(eventName, eventHandler) {\r\n        var result = this.callBase(eventName, eventHandler);\r\n        var event = eventName.charAt(0).toUpperCase() + eventName.substr(1);\r\n        if (EVENTS_LIST.indexOf(event) >= 0) {\r\n            this._refreshEvents()\r\n        }\r\n        return result\r\n    }\r\n});\r\nexport default TextEditorBase;\r\n"]},"metadata":{},"sourceType":"module"}