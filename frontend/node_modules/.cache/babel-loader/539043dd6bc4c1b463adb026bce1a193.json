{"ast":null,"code":"/**\r\n * DevExtreme (esm/events/core/emitter_registrator.js)\r\n * Version: 21.2.5\r\n * Build date: Mon Jan 17 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport $ from \"../../core/renderer\";\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { data as elementData } from \"../../core/element_data\";\nimport Class from \"../../core/class\";\nimport { extend } from \"../../core/utils/extend\";\nimport { inArray } from \"../../core/utils/array\";\nimport { each } from \"../../core/utils/iterator\";\nimport registerEvent from \"./event_registrator\";\nimport { addNamespace, isMouseEvent } from \"../utils/index\";\nimport pointerEvents from \"../pointer\";\nimport { name as wheelEventName } from \"./wheel\";\nvar MANAGER_EVENT = \"dxEventManager\";\nvar EMITTER_DATA = \"dxEmitter\";\nvar EventManager = Class.inherit({\n  ctor: function () {\n    this._attachHandlers();\n\n    this.reset();\n    this._proxiedCancelHandler = this._cancelHandler.bind(this);\n    this._proxiedAcceptHandler = this._acceptHandler.bind(this);\n  },\n  _attachHandlers: function () {\n    readyCallbacks.add(function () {\n      var document = domAdapter.getDocument();\n      eventsEngine.subscribeGlobal(document, addNamespace(pointerEvents.down, MANAGER_EVENT), this._pointerDownHandler.bind(this));\n      eventsEngine.subscribeGlobal(document, addNamespace(pointerEvents.move, MANAGER_EVENT), this._pointerMoveHandler.bind(this));\n      eventsEngine.subscribeGlobal(document, addNamespace([pointerEvents.up, pointerEvents.cancel].join(\" \"), MANAGER_EVENT), this._pointerUpHandler.bind(this));\n      eventsEngine.subscribeGlobal(document, addNamespace(wheelEventName, MANAGER_EVENT), this._mouseWheelHandler.bind(this));\n    }.bind(this));\n  },\n  _eachEmitter: function (callback) {\n    var activeEmitters = this._activeEmitters || [];\n    var i = 0;\n\n    while (activeEmitters.length > i) {\n      var emitter = activeEmitters[i];\n\n      if (false === callback(emitter)) {\n        break;\n      }\n\n      if (activeEmitters[i] === emitter) {\n        i++;\n      }\n    }\n  },\n  _applyToEmitters: function (method, arg) {\n    this._eachEmitter(function (emitter) {\n      emitter[method].call(emitter, arg);\n    });\n  },\n  reset: function () {\n    this._eachEmitter(this._proxiedCancelHandler);\n\n    this._activeEmitters = [];\n  },\n  resetEmitter: function (emitter) {\n    this._proxiedCancelHandler(emitter);\n  },\n  _pointerDownHandler: function (e) {\n    if (isMouseEvent(e) && e.which > 1) {\n      return;\n    }\n\n    this._updateEmitters(e);\n  },\n  _updateEmitters: function (e) {\n    if (!this._isSetChanged(e)) {\n      return;\n    }\n\n    this._cleanEmitters(e);\n\n    this._fetchEmitters(e);\n  },\n  _isSetChanged: function (e) {\n    var currentSet = this._closestEmitter(e);\n\n    var previousSet = this._emittersSet || [];\n    var setChanged = currentSet.length !== previousSet.length;\n    each(currentSet, function (index, emitter) {\n      setChanged = setChanged || previousSet[index] !== emitter;\n      return !setChanged;\n    });\n    this._emittersSet = currentSet;\n    return setChanged;\n  },\n  _closestEmitter: function (e) {\n    var that = this;\n    var result = [];\n    var $element = $(e.target);\n\n    function handleEmitter(_, emitter) {\n      if (!!emitter && emitter.validatePointers(e) && emitter.validate(e)) {\n        emitter.addCancelCallback(that._proxiedCancelHandler);\n        emitter.addAcceptCallback(that._proxiedAcceptHandler);\n        result.push(emitter);\n      }\n    }\n\n    while ($element.length) {\n      var emitters = elementData($element.get(0), EMITTER_DATA) || [];\n      each(emitters, handleEmitter);\n      $element = $element.parent();\n    }\n\n    return result;\n  },\n  _acceptHandler: function (acceptedEmitter, e) {\n    var that = this;\n\n    this._eachEmitter(function (emitter) {\n      if (emitter !== acceptedEmitter) {\n        that._cancelEmitter(emitter, e);\n      }\n    });\n  },\n  _cancelHandler: function (canceledEmitter, e) {\n    this._cancelEmitter(canceledEmitter, e);\n  },\n  _cancelEmitter: function (emitter, e) {\n    var activeEmitters = this._activeEmitters;\n\n    if (e) {\n      emitter.cancel(e);\n    } else {\n      emitter.reset();\n    }\n\n    emitter.removeCancelCallback();\n    emitter.removeAcceptCallback();\n    var emitterIndex = inArray(emitter, activeEmitters);\n\n    if (emitterIndex > -1) {\n      activeEmitters.splice(emitterIndex, 1);\n    }\n  },\n  _cleanEmitters: function (e) {\n    this._applyToEmitters(\"end\", e);\n\n    this.reset(e);\n  },\n  _fetchEmitters: function (e) {\n    this._activeEmitters = this._emittersSet.slice();\n\n    this._applyToEmitters(\"start\", e);\n  },\n  _pointerMoveHandler: function (e) {\n    this._applyToEmitters(\"move\", e);\n  },\n  _pointerUpHandler: function (e) {\n    this._updateEmitters(e);\n  },\n  _mouseWheelHandler: function (e) {\n    if (!this._allowInterruptionByMouseWheel()) {\n      return;\n    }\n\n    e.pointers = [null];\n\n    this._pointerDownHandler(e);\n\n    this._adjustWheelEvent(e);\n\n    this._pointerMoveHandler(e);\n\n    e.pointers = [];\n\n    this._pointerUpHandler(e);\n  },\n  _allowInterruptionByMouseWheel: function () {\n    var allowInterruption = true;\n\n    this._eachEmitter(function (emitter) {\n      allowInterruption = emitter.allowInterruptionByMouseWheel() && allowInterruption;\n      return allowInterruption;\n    });\n\n    return allowInterruption;\n  },\n  _adjustWheelEvent: function (e) {\n    var closestGestureEmitter = null;\n\n    this._eachEmitter(function (emitter) {\n      if (!emitter.gesture) {\n        return;\n      }\n\n      var direction = emitter.getDirection(e);\n\n      if (\"horizontal\" !== direction && !e.shiftKey || \"vertical\" !== direction && e.shiftKey) {\n        closestGestureEmitter = emitter;\n        return false;\n      }\n    });\n\n    if (!closestGestureEmitter) {\n      return;\n    }\n\n    var direction = closestGestureEmitter.getDirection(e);\n    var verticalGestureDirection = \"both\" === direction && !e.shiftKey || \"vertical\" === direction;\n    var prop = verticalGestureDirection ? \"pageY\" : \"pageX\";\n    e[prop] += e.delta;\n  },\n  isActive: function (element) {\n    var result = false;\n\n    this._eachEmitter(function (emitter) {\n      result = result || emitter.getElement().is(element);\n    });\n\n    return result;\n  }\n});\nvar eventManager = new EventManager();\nvar EMITTER_SUBSCRIPTION_DATA = \"dxEmitterSubscription\";\n\nvar registerEmitter = function (emitterConfig) {\n  var emitterClass = emitterConfig.emitter;\n  var emitterName = emitterConfig.events[0];\n  var emitterEvents = emitterConfig.events;\n  each(emitterEvents, function (_, eventName) {\n    registerEvent(eventName, {\n      noBubble: !emitterConfig.bubble,\n      setup: function (element) {\n        var subscriptions = elementData(element, EMITTER_SUBSCRIPTION_DATA) || {};\n        var emitters = elementData(element, EMITTER_DATA) || {};\n        var emitter = emitters[emitterName] || new emitterClass(element);\n        subscriptions[eventName] = true;\n        emitters[emitterName] = emitter;\n        elementData(element, EMITTER_DATA, emitters);\n        elementData(element, EMITTER_SUBSCRIPTION_DATA, subscriptions);\n      },\n      add: function (element, handleObj) {\n        var emitters = elementData(element, EMITTER_DATA);\n        var emitter = emitters[emitterName];\n        emitter.configure(extend({\n          delegateSelector: handleObj.selector\n        }, handleObj.data), handleObj.type);\n      },\n      teardown: function (element) {\n        var subscriptions = elementData(element, EMITTER_SUBSCRIPTION_DATA);\n        var emitters = elementData(element, EMITTER_DATA);\n        var emitter = emitters[emitterName];\n        delete subscriptions[eventName];\n        var disposeEmitter = true;\n        each(emitterEvents, function (_, eventName) {\n          disposeEmitter = disposeEmitter && !subscriptions[eventName];\n          return disposeEmitter;\n        });\n\n        if (disposeEmitter) {\n          if (eventManager.isActive(element)) {\n            eventManager.resetEmitter(emitter);\n          }\n\n          emitter && emitter.dispose();\n          delete emitters[emitterName];\n        }\n      }\n    });\n  });\n};\n\nexport default registerEmitter;","map":{"version":3,"sources":["C:/Users/ciara/OneDrive - GMIT/Coin A-Z Test Repo/frontend/node_modules/devextreme/esm/events/core/emitter_registrator.js"],"names":["$","readyCallbacks","domAdapter","eventsEngine","data","elementData","Class","extend","inArray","each","registerEvent","addNamespace","isMouseEvent","pointerEvents","name","wheelEventName","MANAGER_EVENT","EMITTER_DATA","EventManager","inherit","ctor","_attachHandlers","reset","_proxiedCancelHandler","_cancelHandler","bind","_proxiedAcceptHandler","_acceptHandler","add","document","getDocument","subscribeGlobal","down","_pointerDownHandler","move","_pointerMoveHandler","up","cancel","join","_pointerUpHandler","_mouseWheelHandler","_eachEmitter","callback","activeEmitters","_activeEmitters","i","length","emitter","_applyToEmitters","method","arg","call","resetEmitter","e","which","_updateEmitters","_isSetChanged","_cleanEmitters","_fetchEmitters","currentSet","_closestEmitter","previousSet","_emittersSet","setChanged","index","that","result","$element","target","handleEmitter","_","validatePointers","validate","addCancelCallback","addAcceptCallback","push","emitters","get","parent","acceptedEmitter","_cancelEmitter","canceledEmitter","removeCancelCallback","removeAcceptCallback","emitterIndex","splice","slice","_allowInterruptionByMouseWheel","pointers","_adjustWheelEvent","allowInterruption","allowInterruptionByMouseWheel","closestGestureEmitter","gesture","direction","getDirection","shiftKey","verticalGestureDirection","prop","delta","isActive","element","getElement","is","eventManager","EMITTER_SUBSCRIPTION_DATA","registerEmitter","emitterConfig","emitterClass","emitterName","events","emitterEvents","eventName","noBubble","bubble","setup","subscriptions","handleObj","configure","delegateSelector","selector","type","teardown","disposeEmitter","dispose"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (esm/events/core/emitter_registrator.js)\r\n * Version: 21.2.5\r\n * Build date: Mon Jan 17 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport $ from \"../../core/renderer\";\r\nimport readyCallbacks from \"../../core/utils/ready_callbacks\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    data as elementData\r\n} from \"../../core/element_data\";\r\nimport Class from \"../../core/class\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    inArray\r\n} from \"../../core/utils/array\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport registerEvent from \"./event_registrator\";\r\nimport {\r\n    addNamespace,\r\n    isMouseEvent\r\n} from \"../utils/index\";\r\nimport pointerEvents from \"../pointer\";\r\nimport {\r\n    name as wheelEventName\r\n} from \"./wheel\";\r\nvar MANAGER_EVENT = \"dxEventManager\";\r\nvar EMITTER_DATA = \"dxEmitter\";\r\nvar EventManager = Class.inherit({\r\n    ctor: function() {\r\n        this._attachHandlers();\r\n        this.reset();\r\n        this._proxiedCancelHandler = this._cancelHandler.bind(this);\r\n        this._proxiedAcceptHandler = this._acceptHandler.bind(this)\r\n    },\r\n    _attachHandlers: function() {\r\n        readyCallbacks.add(function() {\r\n            var document = domAdapter.getDocument();\r\n            eventsEngine.subscribeGlobal(document, addNamespace(pointerEvents.down, MANAGER_EVENT), this._pointerDownHandler.bind(this));\r\n            eventsEngine.subscribeGlobal(document, addNamespace(pointerEvents.move, MANAGER_EVENT), this._pointerMoveHandler.bind(this));\r\n            eventsEngine.subscribeGlobal(document, addNamespace([pointerEvents.up, pointerEvents.cancel].join(\" \"), MANAGER_EVENT), this._pointerUpHandler.bind(this));\r\n            eventsEngine.subscribeGlobal(document, addNamespace(wheelEventName, MANAGER_EVENT), this._mouseWheelHandler.bind(this))\r\n        }.bind(this))\r\n    },\r\n    _eachEmitter: function(callback) {\r\n        var activeEmitters = this._activeEmitters || [];\r\n        var i = 0;\r\n        while (activeEmitters.length > i) {\r\n            var emitter = activeEmitters[i];\r\n            if (false === callback(emitter)) {\r\n                break\r\n            }\r\n            if (activeEmitters[i] === emitter) {\r\n                i++\r\n            }\r\n        }\r\n    },\r\n    _applyToEmitters: function(method, arg) {\r\n        this._eachEmitter((function(emitter) {\r\n            emitter[method].call(emitter, arg)\r\n        }))\r\n    },\r\n    reset: function() {\r\n        this._eachEmitter(this._proxiedCancelHandler);\r\n        this._activeEmitters = []\r\n    },\r\n    resetEmitter: function(emitter) {\r\n        this._proxiedCancelHandler(emitter)\r\n    },\r\n    _pointerDownHandler: function(e) {\r\n        if (isMouseEvent(e) && e.which > 1) {\r\n            return\r\n        }\r\n        this._updateEmitters(e)\r\n    },\r\n    _updateEmitters: function(e) {\r\n        if (!this._isSetChanged(e)) {\r\n            return\r\n        }\r\n        this._cleanEmitters(e);\r\n        this._fetchEmitters(e)\r\n    },\r\n    _isSetChanged: function(e) {\r\n        var currentSet = this._closestEmitter(e);\r\n        var previousSet = this._emittersSet || [];\r\n        var setChanged = currentSet.length !== previousSet.length;\r\n        each(currentSet, (function(index, emitter) {\r\n            setChanged = setChanged || previousSet[index] !== emitter;\r\n            return !setChanged\r\n        }));\r\n        this._emittersSet = currentSet;\r\n        return setChanged\r\n    },\r\n    _closestEmitter: function(e) {\r\n        var that = this;\r\n        var result = [];\r\n        var $element = $(e.target);\r\n\r\n        function handleEmitter(_, emitter) {\r\n            if (!!emitter && emitter.validatePointers(e) && emitter.validate(e)) {\r\n                emitter.addCancelCallback(that._proxiedCancelHandler);\r\n                emitter.addAcceptCallback(that._proxiedAcceptHandler);\r\n                result.push(emitter)\r\n            }\r\n        }\r\n        while ($element.length) {\r\n            var emitters = elementData($element.get(0), EMITTER_DATA) || [];\r\n            each(emitters, handleEmitter);\r\n            $element = $element.parent()\r\n        }\r\n        return result\r\n    },\r\n    _acceptHandler: function(acceptedEmitter, e) {\r\n        var that = this;\r\n        this._eachEmitter((function(emitter) {\r\n            if (emitter !== acceptedEmitter) {\r\n                that._cancelEmitter(emitter, e)\r\n            }\r\n        }))\r\n    },\r\n    _cancelHandler: function(canceledEmitter, e) {\r\n        this._cancelEmitter(canceledEmitter, e)\r\n    },\r\n    _cancelEmitter: function(emitter, e) {\r\n        var activeEmitters = this._activeEmitters;\r\n        if (e) {\r\n            emitter.cancel(e)\r\n        } else {\r\n            emitter.reset()\r\n        }\r\n        emitter.removeCancelCallback();\r\n        emitter.removeAcceptCallback();\r\n        var emitterIndex = inArray(emitter, activeEmitters);\r\n        if (emitterIndex > -1) {\r\n            activeEmitters.splice(emitterIndex, 1)\r\n        }\r\n    },\r\n    _cleanEmitters: function(e) {\r\n        this._applyToEmitters(\"end\", e);\r\n        this.reset(e)\r\n    },\r\n    _fetchEmitters: function(e) {\r\n        this._activeEmitters = this._emittersSet.slice();\r\n        this._applyToEmitters(\"start\", e)\r\n    },\r\n    _pointerMoveHandler: function(e) {\r\n        this._applyToEmitters(\"move\", e)\r\n    },\r\n    _pointerUpHandler: function(e) {\r\n        this._updateEmitters(e)\r\n    },\r\n    _mouseWheelHandler: function(e) {\r\n        if (!this._allowInterruptionByMouseWheel()) {\r\n            return\r\n        }\r\n        e.pointers = [null];\r\n        this._pointerDownHandler(e);\r\n        this._adjustWheelEvent(e);\r\n        this._pointerMoveHandler(e);\r\n        e.pointers = [];\r\n        this._pointerUpHandler(e)\r\n    },\r\n    _allowInterruptionByMouseWheel: function() {\r\n        var allowInterruption = true;\r\n        this._eachEmitter((function(emitter) {\r\n            allowInterruption = emitter.allowInterruptionByMouseWheel() && allowInterruption;\r\n            return allowInterruption\r\n        }));\r\n        return allowInterruption\r\n    },\r\n    _adjustWheelEvent: function(e) {\r\n        var closestGestureEmitter = null;\r\n        this._eachEmitter((function(emitter) {\r\n            if (!emitter.gesture) {\r\n                return\r\n            }\r\n            var direction = emitter.getDirection(e);\r\n            if (\"horizontal\" !== direction && !e.shiftKey || \"vertical\" !== direction && e.shiftKey) {\r\n                closestGestureEmitter = emitter;\r\n                return false\r\n            }\r\n        }));\r\n        if (!closestGestureEmitter) {\r\n            return\r\n        }\r\n        var direction = closestGestureEmitter.getDirection(e);\r\n        var verticalGestureDirection = \"both\" === direction && !e.shiftKey || \"vertical\" === direction;\r\n        var prop = verticalGestureDirection ? \"pageY\" : \"pageX\";\r\n        e[prop] += e.delta\r\n    },\r\n    isActive: function(element) {\r\n        var result = false;\r\n        this._eachEmitter((function(emitter) {\r\n            result = result || emitter.getElement().is(element)\r\n        }));\r\n        return result\r\n    }\r\n});\r\nvar eventManager = new EventManager;\r\nvar EMITTER_SUBSCRIPTION_DATA = \"dxEmitterSubscription\";\r\nvar registerEmitter = function(emitterConfig) {\r\n    var emitterClass = emitterConfig.emitter;\r\n    var emitterName = emitterConfig.events[0];\r\n    var emitterEvents = emitterConfig.events;\r\n    each(emitterEvents, (function(_, eventName) {\r\n        registerEvent(eventName, {\r\n            noBubble: !emitterConfig.bubble,\r\n            setup: function(element) {\r\n                var subscriptions = elementData(element, EMITTER_SUBSCRIPTION_DATA) || {};\r\n                var emitters = elementData(element, EMITTER_DATA) || {};\r\n                var emitter = emitters[emitterName] || new emitterClass(element);\r\n                subscriptions[eventName] = true;\r\n                emitters[emitterName] = emitter;\r\n                elementData(element, EMITTER_DATA, emitters);\r\n                elementData(element, EMITTER_SUBSCRIPTION_DATA, subscriptions)\r\n            },\r\n            add: function(element, handleObj) {\r\n                var emitters = elementData(element, EMITTER_DATA);\r\n                var emitter = emitters[emitterName];\r\n                emitter.configure(extend({\r\n                    delegateSelector: handleObj.selector\r\n                }, handleObj.data), handleObj.type)\r\n            },\r\n            teardown: function(element) {\r\n                var subscriptions = elementData(element, EMITTER_SUBSCRIPTION_DATA);\r\n                var emitters = elementData(element, EMITTER_DATA);\r\n                var emitter = emitters[emitterName];\r\n                delete subscriptions[eventName];\r\n                var disposeEmitter = true;\r\n                each(emitterEvents, (function(_, eventName) {\r\n                    disposeEmitter = disposeEmitter && !subscriptions[eventName];\r\n                    return disposeEmitter\r\n                }));\r\n                if (disposeEmitter) {\r\n                    if (eventManager.isActive(element)) {\r\n                        eventManager.resetEmitter(emitter)\r\n                    }\r\n                    emitter && emitter.dispose();\r\n                    delete emitters[emitterName]\r\n                }\r\n            }\r\n        })\r\n    }))\r\n};\r\nexport default registerEmitter;\r\n"]},"metadata":{},"sourceType":"module"}