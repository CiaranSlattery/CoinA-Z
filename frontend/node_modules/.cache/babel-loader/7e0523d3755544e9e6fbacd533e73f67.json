{"ast":null,"code":"import _classCallCheck from\"C:/Users/ciara/OneDrive - GMIT/Coin A-Z Test Repo/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/ciara/OneDrive - GMIT/Coin A-Z Test Repo/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"C:/Users/ciara/OneDrive - GMIT/Coin A-Z Test Repo/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"C:/Users/ciara/OneDrive - GMIT/Coin A-Z Test Repo/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/ciara/OneDrive - GMIT/Coin A-Z Test Repo/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import moment from\"moment\";import{Form,Field,Formik,ErrorMessage}from'formik';import TodoDataService from\"./TodoDataService\";import AuthenticationService from\"../AuthenticationService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Todo=/*#__PURE__*/function(_Component){_inherits(Todo,_Component);var _super=_createSuper(Todo);function Todo(props){var _this;_classCallCheck(this,Todo);_this=_super.call(this,props);_this.state={id:_this.props.match.params.id,description:'',targetDate:moment(new Date()).format('YYYY-MM-DD')};_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));_this.validate=_this.validate.bind(_assertThisInitialized(_this));return _this;}_createClass(Todo,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.state.id===-1){return;}var username=AuthenticationService.getLoggedInUserName();TodoDataService.retrieveTodo(username,this.state.id).then(function(response){return _this2.setState({description:response.data.description,targetDate:moment(response.data.targetDate).format('YYYY-MM-DD')});});}},{key:\"validate\",value:function validate(values){var errors={};if(!values.description){errors.description='Enter a Description';}else if(values.description.length<5){errors.description='Enter atleast 5 Characters om Description';}if(!moment(values.targetDate).isValid()){errors.targetDate='Enter a valid target date';}return errors;}},{key:\"onSubmit\",value:function onSubmit(values){var _this3=this;var username=AuthenticationService.getLoggedInUserName();var todo={id:this.state.id,description:values.description,targetDate:values.targetDate};if(this.state.id===-1){TodoDataService.createTodo(username,todo).then(function(){_this3.props.history.push(\"/todos\");});}else{TodoDataService.updateTodo(username,this.state.id,todo).then(function(){_this3.props.history.push(\"/todos\");});}console.log(values);}},{key:\"render\",value:function render(){var _this$state=this.state,description=_this$state.description,targetDate=_this$state.targetDate;//let targetDate = this.state.targetDate\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Todo\"}),/*#__PURE__*/_jsx(\"div\",{class:\"container\",children:/*#__PURE__*/_jsx(Formik,{initialValues:{description:description,targetDate:targetDate},onSubmit:this.onSubmit,validateOnChange:false,validateOnBlur:false,validate:this.validate,enableReinitialize:true,children:function children(props){return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(ErrorMessage,{name:\"description\",component:\"div\",className:\"alert alert-warning\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"targetDate\",component:\"div\",className:\"alert alert-warning\"}),/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(Field,{className:\"form-control\",type:\"text\",name:\"description\"})]}),/*#__PURE__*/_jsxs(\"fieldset\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Target\"}),/*#__PURE__*/_jsx(Field,{className:\"form-control\",type:\"date\",name:\"targetDate\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",type:\"submit\",children:\"Save\"})]});}})})]});}}]);return Todo;}(Component);export default Todo;","map":{"version":3,"sources":["C:/Users/ciara/OneDrive - GMIT/Coin A-Z Test Repo/frontend/src/components/todo/Todo.js"],"names":["React","Component","moment","Form","Field","Formik","ErrorMessage","TodoDataService","AuthenticationService","Todo","props","state","id","match","params","description","targetDate","Date","format","onSubmit","bind","validate","username","getLoggedInUserName","retrieveTodo","then","response","setState","data","values","errors","length","isValid","todo","createTodo","history","push","updateTodo","console","log"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport moment from \"moment\";\r\nimport {Form, Field, Formik, ErrorMessage} from 'formik';\r\nimport TodoDataService from \"./TodoDataService\";\r\nimport AuthenticationService from \"../AuthenticationService\";\r\n\r\n\r\nclass Todo extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            id : this.props.match.params.id,\r\n            description :'',\r\n            targetDate : moment(new Date()).format('YYYY-MM-DD')\r\n        }\r\n        this.onSubmit = this.onSubmit.bind(this)\r\n        this.validate = this.validate.bind(this)\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        if(this.state.id===-1){\r\n            return\r\n        }\r\n\r\n        let username = AuthenticationService.getLoggedInUserName();\r\n        TodoDataService.retrieveTodo(username, this.state.id)\r\n            .then(response => this.setState({\r\n                description: response.data.description,\r\n                targetDate: moment(response.data.targetDate).format('YYYY-MM-DD')\r\n            }))\r\n    }\r\n\r\n    validate(values){\r\n        let errors = {}\r\n        if(!values.description){\r\n            errors.description = 'Enter a Description'\r\n        }\r\n        else if(values.description.length<5){\r\n            errors.description = 'Enter atleast 5 Characters om Description'\r\n        }\r\n\r\n        if(!moment(values.targetDate).isValid()){\r\n            errors.targetDate = 'Enter a valid target date'\r\n        }\r\n        return errors\r\n    }\r\n\r\n    onSubmit(values){\r\n        let username = AuthenticationService.getLoggedInUserName();\r\n\r\n\r\n        let todo = {\r\n            id: this.state.id,\r\n                description: values.description,\r\n            targetDate: values.targetDate\r\n        }\r\n\r\n        if(this.state.id===-1){\r\n            TodoDataService.createTodo(username, todo)\r\n                .then(() => {this.props.history.push(`/todos`)\r\n            })\r\n\r\n        }else {\r\n\r\n            TodoDataService.updateTodo(username, this.state.id, todo)\r\n                .then(() => {this.props.history.push(`/todos`)\r\n            })\r\n        }\r\n\r\n        console.log(values);\r\n    }\r\n\r\n    render() {\r\n        let {description, targetDate} = this.state\r\n        //let targetDate = this.state.targetDate\r\n\r\n        return (\r\n            <div>\r\n            <h1>Todo</h1>\r\n            <div class=\"container\">\r\n               <Formik\r\n                    initialValues={{description, targetDate}}\r\n                    onSubmit={this.onSubmit}\r\n                    validateOnChange={false}\r\n                    validateOnBlur={false}\r\n                    validate={this.validate}\r\n                    enableReinitialize={true}\r\n               >\r\n                   {\r\n                       (props) => (\r\n                           <Form>\r\n                               <ErrorMessage name=\"description\" component=\"div\"\r\n                                             className=\"alert alert-warning\"/>\r\n                               <ErrorMessage name=\"targetDate\" component=\"div\"\r\n                                             className=\"alert alert-warning\"/>\r\n                                <fieldset className=\"form-group\">\r\n                                    <label>Description</label>\r\n                                    <Field className=\"form-control\" type =\"text\" name=\"description\"/>\r\n                                </fieldset>\r\n                               <fieldset className=\"form-group\">\r\n                                   <label>Target</label>\r\n                                   <Field className=\"form-control\" type =\"date\" name=\"targetDate\"/>\r\n                               </fieldset>\r\n                               <button className=\"btn btn-success\" type=\"submit\">Save</button>\r\n                           </Form>\r\n                       )\r\n                   }\r\n               </Formik>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Todo;\r\n"]},"metadata":{},"sourceType":"module"}